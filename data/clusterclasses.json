{
  "apiVersion": "cluster.x-k8s.io/v1beta1",
  "items": [
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T15:04:00Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T15:04:00Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T15:04:00Z"
          }
        ],
        "name": "openstack-alpha-1-28-v4",
        "namespace": "kaas-playground0",
        "resourceVersion": "9663927",
        "uid": "ff56f9f9-c1e9-47cc-9218-b51a645beab3"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-28-v4-control-plane",
              "namespace": "kaas-playground0"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-28-v4-control-plane",
            "namespace": "kaas-playground0"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-28-v4-cluster",
            "namespace": "kaas-playground0"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-28-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground0"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground0"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T15:04:00Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T15:04:00Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T15:04:00Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T15:04:00Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T15:04:01Z"
          }
        ],
        "name": "openstack-alpha-1-29-v3",
        "namespace": "kaas-playground0",
        "resourceVersion": "9663954",
        "uid": "00b4057d-a1f4-480b-b4db-86a3579e6067"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-29-v3-control-plane",
              "namespace": "kaas-playground0"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-29-v3-control-plane",
            "namespace": "kaas-playground0"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-29-v3-cluster",
            "namespace": "kaas-playground0"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-29-v3",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground0"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground0"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T15:04:01Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T15:04:00Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T15:04:47Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T15:04:47Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T15:04:47Z"
          }
        ],
        "name": "openstack-alpha-1-30-v2",
        "namespace": "kaas-playground0",
        "resourceVersion": "9664680",
        "uid": "ec3e506f-dc0d-4542-b3e5-bd03d2a4f1ff"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-30-v2-control-plane",
              "namespace": "kaas-playground0"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-30-v2-control-plane",
            "namespace": "kaas-playground0"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-30-v2-cluster",
            "namespace": "kaas-playground0"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-30-v2",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground0"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground0"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T15:04:47Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T15:04:47Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-07-03T14:03:16Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-07-03T14:03:16Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-03T14:03:16Z"
          }
        ],
        "name": "openstack-kamaji-1-30-v0-sha.11930ee",
        "namespace": "kaas-playground0",
        "resourceVersion": "18905266",
        "uid": "b0ab3a6c-ff8a-4736-a71f-8b45720067e0"
      },
      "spec": {
        "controlPlane": {
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
            "kind": "KamajiControlPlaneTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-control-plane",
            "namespace": "kaas-playground0"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-cluster",
            "namespace": "kaas-playground0"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dataStoreName",
                    "valueFrom": {
                      "variable": "data_store"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the name of the Kamaji DataStore to use for the given KamajiControlPlane.",
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/addons/coreDNS/dnsServiceIPs",
                    "valueFrom": {
                      "variable": "dns_service_ips"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the list of IP addresses for the cluster DNS server.",
            "enabledIf": "{{ if .dns_service_ips }}true{{end}}",
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-client-id={{ .oidc_config.client_id }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-issuer-url={{ .oidc_config.issuer_url }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-claim={{ .oidc_config.username_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-claim={{ .oidc_config.groups_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-prefix={{ .oidc_config.username_prefix }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-prefix={{ .oidc_config.groups_prefix }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "data_store",
            "required": true,
            "schema": {
              "openAPIV3Schema": {
                "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                "example": "default",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_service_ips",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "10.96.0.10"
                ],
                "description": "List of IP addresses for the cluster DNS server.",
                "example": [
                  "10.96.0.10"
                ],
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "default-worker",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground0"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground0"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-03T14:03:16Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-07-03T14:03:16Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": true,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                    "example": "default",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "10.96.0.10"
                    ],
                    "description": "List of IP addresses for the cluster DNS server.",
                    "example": [
                      "10.96.0.10"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-19T13:17:22Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-19T13:17:22Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-04T07:22:19Z"
          }
        ],
        "name": "openstack-scs-1-27-v4",
        "namespace": "kaas-playground0",
        "resourceVersion": "19951227",
        "uid": "473e13ab-636a-4fe5-958b-819bd8be8349"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-scs-1-27-v4-control-plane",
              "namespace": "kaas-playground0"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-scs-1-27-v4-control-plane",
            "namespace": "kaas-playground0"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-scs-1-27-v4-cluster",
            "namespace": "kaas-playground0"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/image",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "amphora"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-amphora.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-amphora\" }}",
            "name": "apiserver_loadbalancer_octavia-amphora"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "ovn"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-ovn.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-ovn\" }}",
            "name": "apiserver_loadbalancer_octavia-ovn"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network",
                    "valueFrom": {
                      "template": "id: {{ .kube_vip_network_id }}\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/disableAPIServerFloatingIP",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerFixedIP",
                    "valueFrom": {
                      "template": "{{ if .kube_vip_apiserver_public_ip }}{{.kube_vip_apiserver_public_ip}}{{else}}{{.kube_vip_apiserver_virtual_ip}}{{end}}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/ports",
                    "valueFrom": {
                      "template": "- network:\n    id: {{ .kube_vip_network_id }}\n  allowedAddressPairs:\n  - ipAddress: {{ .kube_vip_apiserver_virtual_ip }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/preKubeadmCommands",
                    "valueFrom": {
                      "template": "- modprobe --all ip_vs ip_vs_rr nf_conntrack\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files",
                    "valueFrom": {
                      "template": "- content: |\n    ip_vs\n    ip_vs_rr\n    nf_conntrack\n  owner: \"root:root\"\n  path: /etc/modules-load.d/kube-vip.conf\n  permissions: \"0644\"\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files/-",
                    "valueFrom": {
                      "template": "content: |\n  # docker run --network host --rm ghcr.io/kube-vip/kube-vip:v0.7.2 manifest pod --address '{{ .kube_vip_apiserver_virtual_ip }}' --controlplane --arp --leaderElection --enableLoadBalancer\n  apiVersion: v1\n  kind: Pod\n  metadata:\n    creationTimestamp: null\n    name: kube-vip\n    namespace: kube-system\n  spec:\n    containers:\n    - args:\n      - manager\n      env:\n      - name: vip_arp\n        value: \"true\"\n      - name: port\n        value: \"6443\"\n      - name: vip_cidr\n        value: \"32\"\n      - name: dns_mode\n        value: first\n      - name: cp_enable\n        value: \"true\"\n      - name: cp_namespace\n        value: kube-system\n      - name: vip_leaderelection\n        value: \"true\"\n      - name: vip_leasename\n        value: plndr-cp-lock\n      - name: vip_leaseduration\n        value: \"5\"\n      - name: vip_renewdeadline\n        value: \"3\"\n      - name: vip_retryperiod\n        value: \"1\"\n      - name: lb_enable\n        value: \"true\"\n      - name: lb_port\n        value: \"6443\"\n      - name: lb_fwdmethod\n        value: local\n      - name: address\n        value: '{{ .kube_vip_apiserver_virtual_ip }}'\n      - name: prometheus_server\n        value: :2112\n      image: ghcr.io/kube-vip/kube-vip:v0.7.2\n      imagePullPolicy: IfNotPresent # Always\n      name: kube-vip\n      resources: {}\n      securityContext:\n        capabilities:\n          add:\n          - NET_ADMIN\n          - NET_RAW\n      volumeMounts:\n      - mountPath: /etc/kubernetes/admin.conf\n        name: kubeconfig\n    hostAliases:\n    - hostnames:\n      - kubernetes\n      ip: 127.0.0.1\n    hostNetwork: true\n    volumes:\n    - hostPath:\n        path: /etc/kubernetes/admin.conf\n      name: kubeconfig\n  status: {}\nowner: \"root:root\"\npath: /etc/kubernetes/manifests/kube-vip.yaml\npermissions: \"0644\"\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to kube-vip.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"kube-vip\" }}",
            "name": "apiserver_loadbalancer_kube-vip"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetworkId",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { name: {{ . }}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "controller_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "worker_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dnsNameservers",
                    "valueFrom": {
                      "variable": "dns_nameservers"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of nameservers for the OpenStack Subnet being created.",
            "enabledIf": "{{ if and .dns_nameservers (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/nodeCidr",
                    "valueFrom": {
                      "variable": "node_cidr"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ if and .node_cidr (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "node_cidr"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_flavor_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing flavor used as a default yawol flavor.",
                "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_image_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing imaged used as a default yawol image.",
                "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_network_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_virtual_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Virtual IP address reserved in kube_vip_network_id.",
                "example": "10.0.0.197",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_public_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "apiserver_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "workload_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                "example": "none, octavia-amphora, octavia-ovn, yawol",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-scs-1-27-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground0"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground0"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-04T07:22:19Z",
            "message": "Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackClusterTemplate kaas-playground0/openstack-scs-1-27-v4-cluster\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackClusterTemplate kaas-playground0/openstack-scs-1-27-v4-cluster\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground0/openstack-scs-1-27-v4-control-plane\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground0/openstack-scs-1-27-v4-control-plane\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground0/openstack-scs-1-27-v4\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground0/openstack-scs-1-27-v4\"",
            "reason": "OutdatedRefVersions",
            "severity": "Warning",
            "status": "False",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-19T13:17:22Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                    "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "apiserver_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_public_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Virtual IP address reserved in kube_vip_network_id.",
                    "example": "10.0.0.197",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_virtual_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                    "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_network_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                    "example": "none, octavia-amphora, octavia-ovn, yawol",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "workload_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing flavor used as a default yawol flavor.",
                    "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_flavor_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing imaged used as a default yawol image.",
                    "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_image_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T15:23:33Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T15:23:33Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T15:23:33Z"
          }
        ],
        "name": "openstack-alpha-1-28-v4",
        "namespace": "kaas-playground1",
        "resourceVersion": "9680664",
        "uid": "8d5cdfcf-3c78-45d3-bc3f-82c4873217ea"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-28-v4-control-plane",
              "namespace": "kaas-playground1"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-28-v4-control-plane",
            "namespace": "kaas-playground1"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-28-v4-cluster",
            "namespace": "kaas-playground1"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-28-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground1"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground1"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T15:23:33Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T15:23:33Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T15:23:59Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T15:23:59Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T15:23:59Z"
          }
        ],
        "name": "openstack-alpha-1-29-v3",
        "namespace": "kaas-playground1",
        "resourceVersion": "9681796",
        "uid": "0aa2ea95-ec4a-40c9-90fd-f5d7c3c51bfc"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-29-v3-control-plane",
              "namespace": "kaas-playground1"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-29-v3-control-plane",
            "namespace": "kaas-playground1"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-29-v3-cluster",
            "namespace": "kaas-playground1"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-29-v3",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground1"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground1"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T15:23:59Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T15:23:59Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T15:23:59Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T15:23:59Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T15:23:59Z"
          }
        ],
        "name": "openstack-alpha-1-30-v2",
        "namespace": "kaas-playground1",
        "resourceVersion": "9681841",
        "uid": "9a6c5f83-b742-48ba-a1fc-819f9ee1da9d"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-30-v2-control-plane",
              "namespace": "kaas-playground1"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-30-v2-control-plane",
            "namespace": "kaas-playground1"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-30-v2-cluster",
            "namespace": "kaas-playground1"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-30-v2",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground1"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground1"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T15:23:59Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T15:23:59Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-07-03T14:03:16Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-07-03T14:03:16Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-03T14:03:17Z"
          }
        ],
        "name": "openstack-kamaji-1-30-v0-sha.11930ee",
        "namespace": "kaas-playground1",
        "resourceVersion": "18905310",
        "uid": "d6cd74a5-d59c-4da1-b9ca-d33955785f02"
      },
      "spec": {
        "controlPlane": {
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
            "kind": "KamajiControlPlaneTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-control-plane",
            "namespace": "kaas-playground1"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-cluster",
            "namespace": "kaas-playground1"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dataStoreName",
                    "valueFrom": {
                      "variable": "data_store"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the name of the Kamaji DataStore to use for the given KamajiControlPlane.",
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/addons/coreDNS/dnsServiceIPs",
                    "valueFrom": {
                      "variable": "dns_service_ips"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the list of IP addresses for the cluster DNS server.",
            "enabledIf": "{{ if .dns_service_ips }}true{{end}}",
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-client-id={{ .oidc_config.client_id }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-issuer-url={{ .oidc_config.issuer_url }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-claim={{ .oidc_config.username_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-claim={{ .oidc_config.groups_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-prefix={{ .oidc_config.username_prefix }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-prefix={{ .oidc_config.groups_prefix }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "data_store",
            "required": true,
            "schema": {
              "openAPIV3Schema": {
                "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                "example": "default",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_service_ips",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "10.96.0.10"
                ],
                "description": "List of IP addresses for the cluster DNS server.",
                "example": [
                  "10.96.0.10"
                ],
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "default-worker",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground1"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground1"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-03T14:03:17Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-07-03T14:03:16Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": true,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                    "example": "default",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "10.96.0.10"
                    ],
                    "description": "List of IP addresses for the cluster DNS server.",
                    "example": [
                      "10.96.0.10"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-19T13:30:34Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-19T13:30:34Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-04T07:12:32Z"
          }
        ],
        "name": "openstack-scs-1-27-v4",
        "namespace": "kaas-playground1",
        "resourceVersion": "19941483",
        "uid": "c406196b-c4a7-4826-95fe-8696b3aa9e7e"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-scs-1-27-v4-control-plane",
              "namespace": "kaas-playground1"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-scs-1-27-v4-control-plane",
            "namespace": "kaas-playground1"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-scs-1-27-v4-cluster",
            "namespace": "kaas-playground1"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/image",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "amphora"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-amphora.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-amphora\" }}",
            "name": "apiserver_loadbalancer_octavia-amphora"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "ovn"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-ovn.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-ovn\" }}",
            "name": "apiserver_loadbalancer_octavia-ovn"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network",
                    "valueFrom": {
                      "template": "id: {{ .kube_vip_network_id }}\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/disableAPIServerFloatingIP",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerFixedIP",
                    "valueFrom": {
                      "template": "{{ if .kube_vip_apiserver_public_ip }}{{.kube_vip_apiserver_public_ip}}{{else}}{{.kube_vip_apiserver_virtual_ip}}{{end}}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/ports",
                    "valueFrom": {
                      "template": "- network:\n    id: {{ .kube_vip_network_id }}\n  allowedAddressPairs:\n  - ipAddress: {{ .kube_vip_apiserver_virtual_ip }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/preKubeadmCommands",
                    "valueFrom": {
                      "template": "- modprobe --all ip_vs ip_vs_rr nf_conntrack\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files",
                    "valueFrom": {
                      "template": "- content: |\n    ip_vs\n    ip_vs_rr\n    nf_conntrack\n  owner: \"root:root\"\n  path: /etc/modules-load.d/kube-vip.conf\n  permissions: \"0644\"\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files/-",
                    "valueFrom": {
                      "template": "content: |\n  # docker run --network host --rm ghcr.io/kube-vip/kube-vip:v0.7.2 manifest pod --address '{{ .kube_vip_apiserver_virtual_ip }}' --controlplane --arp --leaderElection --enableLoadBalancer\n  apiVersion: v1\n  kind: Pod\n  metadata:\n    creationTimestamp: null\n    name: kube-vip\n    namespace: kube-system\n  spec:\n    containers:\n    - args:\n      - manager\n      env:\n      - name: vip_arp\n        value: \"true\"\n      - name: port\n        value: \"6443\"\n      - name: vip_cidr\n        value: \"32\"\n      - name: dns_mode\n        value: first\n      - name: cp_enable\n        value: \"true\"\n      - name: cp_namespace\n        value: kube-system\n      - name: vip_leaderelection\n        value: \"true\"\n      - name: vip_leasename\n        value: plndr-cp-lock\n      - name: vip_leaseduration\n        value: \"5\"\n      - name: vip_renewdeadline\n        value: \"3\"\n      - name: vip_retryperiod\n        value: \"1\"\n      - name: lb_enable\n        value: \"true\"\n      - name: lb_port\n        value: \"6443\"\n      - name: lb_fwdmethod\n        value: local\n      - name: address\n        value: '{{ .kube_vip_apiserver_virtual_ip }}'\n      - name: prometheus_server\n        value: :2112\n      image: ghcr.io/kube-vip/kube-vip:v0.7.2\n      imagePullPolicy: IfNotPresent # Always\n      name: kube-vip\n      resources: {}\n      securityContext:\n        capabilities:\n          add:\n          - NET_ADMIN\n          - NET_RAW\n      volumeMounts:\n      - mountPath: /etc/kubernetes/admin.conf\n        name: kubeconfig\n    hostAliases:\n    - hostnames:\n      - kubernetes\n      ip: 127.0.0.1\n    hostNetwork: true\n    volumes:\n    - hostPath:\n        path: /etc/kubernetes/admin.conf\n      name: kubeconfig\n  status: {}\nowner: \"root:root\"\npath: /etc/kubernetes/manifests/kube-vip.yaml\npermissions: \"0644\"\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to kube-vip.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"kube-vip\" }}",
            "name": "apiserver_loadbalancer_kube-vip"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetworkId",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { name: {{ . }}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "controller_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "worker_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dnsNameservers",
                    "valueFrom": {
                      "variable": "dns_nameservers"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of nameservers for the OpenStack Subnet being created.",
            "enabledIf": "{{ if and .dns_nameservers (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/nodeCidr",
                    "valueFrom": {
                      "variable": "node_cidr"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ if and .node_cidr (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "node_cidr"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_flavor_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing flavor used as a default yawol flavor.",
                "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_image_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing imaged used as a default yawol image.",
                "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_network_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_virtual_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Virtual IP address reserved in kube_vip_network_id.",
                "example": "10.0.0.197",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_public_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "apiserver_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "workload_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                "example": "none, octavia-amphora, octavia-ovn, yawol",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-scs-1-27-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground1"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground1"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-04T07:12:32Z",
            "message": "Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackClusterTemplate kaas-playground1/openstack-scs-1-27-v4-cluster\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackClusterTemplate kaas-playground1/openstack-scs-1-27-v4-cluster\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground1/openstack-scs-1-27-v4-control-plane\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground1/openstack-scs-1-27-v4-control-plane\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground1/openstack-scs-1-27-v4\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground1/openstack-scs-1-27-v4\"",
            "reason": "OutdatedRefVersions",
            "severity": "Warning",
            "status": "False",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-19T13:30:34Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                    "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "apiserver_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_public_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Virtual IP address reserved in kube_vip_network_id.",
                    "example": "10.0.0.197",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_virtual_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                    "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_network_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                    "example": "none, octavia-amphora, octavia-ovn, yawol",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "workload_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing flavor used as a default yawol flavor.",
                    "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_flavor_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing imaged used as a default yawol image.",
                    "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_image_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T17:08:35Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T17:08:35Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T17:08:35Z"
          }
        ],
        "name": "openstack-alpha-1-28-v4",
        "namespace": "kaas-playground2",
        "resourceVersion": "9784987",
        "uid": "46f75564-1a77-4179-8560-dca23093efac"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-28-v4-control-plane",
              "namespace": "kaas-playground2"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-28-v4-control-plane",
            "namespace": "kaas-playground2"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-28-v4-cluster",
            "namespace": "kaas-playground2"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-28-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground2"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground2"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T17:08:35Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T17:08:35Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T17:15:37Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T17:15:37Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T17:15:38Z"
          }
        ],
        "name": "openstack-alpha-1-29-v3",
        "namespace": "kaas-playground2",
        "resourceVersion": "9791946",
        "uid": "6f92e436-fa04-4dc9-a405-108b40cb5cb6"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-29-v3-control-plane",
              "namespace": "kaas-playground2"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-29-v3-control-plane",
            "namespace": "kaas-playground2"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-29-v3-cluster",
            "namespace": "kaas-playground2"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-29-v3",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground2"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground2"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T17:15:38Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T17:15:38Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T15:24:00Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T15:24:00Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T15:24:00Z"
          }
        ],
        "name": "openstack-alpha-1-30-v2",
        "namespace": "kaas-playground2",
        "resourceVersion": "9681872",
        "uid": "73aae2ff-4d5f-4afb-a26a-7909d789a659"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-30-v2-control-plane",
              "namespace": "kaas-playground2"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-30-v2-control-plane",
            "namespace": "kaas-playground2"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-30-v2-cluster",
            "namespace": "kaas-playground2"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-30-v2",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground2"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground2"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T15:24:00Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T15:24:00Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-07-03T14:03:17Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-07-03T14:03:17Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-03T14:03:18Z"
          }
        ],
        "name": "openstack-kamaji-1-30-v0-sha.11930ee",
        "namespace": "kaas-playground2",
        "resourceVersion": "18905372",
        "uid": "2a0365cf-d728-4e59-b4be-232dc8f6c902"
      },
      "spec": {
        "controlPlane": {
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
            "kind": "KamajiControlPlaneTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-control-plane",
            "namespace": "kaas-playground2"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-cluster",
            "namespace": "kaas-playground2"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dataStoreName",
                    "valueFrom": {
                      "variable": "data_store"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the name of the Kamaji DataStore to use for the given KamajiControlPlane.",
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/addons/coreDNS/dnsServiceIPs",
                    "valueFrom": {
                      "variable": "dns_service_ips"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the list of IP addresses for the cluster DNS server.",
            "enabledIf": "{{ if .dns_service_ips }}true{{end}}",
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-client-id={{ .oidc_config.client_id }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-issuer-url={{ .oidc_config.issuer_url }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-claim={{ .oidc_config.username_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-claim={{ .oidc_config.groups_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-prefix={{ .oidc_config.username_prefix }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-prefix={{ .oidc_config.groups_prefix }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "data_store",
            "required": true,
            "schema": {
              "openAPIV3Schema": {
                "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                "example": "default",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_service_ips",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "10.96.0.10"
                ],
                "description": "List of IP addresses for the cluster DNS server.",
                "example": [
                  "10.96.0.10"
                ],
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "default-worker",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground2"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground2"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-03T14:03:18Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-07-03T14:03:17Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": true,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                    "example": "default",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "10.96.0.10"
                    ],
                    "description": "List of IP addresses for the cluster DNS server.",
                    "example": [
                      "10.96.0.10"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-19T13:30:32Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-19T13:30:32Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-04T07:51:39Z"
          }
        ],
        "name": "openstack-scs-1-27-v4",
        "namespace": "kaas-playground2",
        "resourceVersion": "19981390",
        "uid": "6b79558a-f0a7-4e3d-8a86-d41512325a93"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-scs-1-27-v4-control-plane",
              "namespace": "kaas-playground2"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-scs-1-27-v4-control-plane",
            "namespace": "kaas-playground2"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-scs-1-27-v4-cluster",
            "namespace": "kaas-playground2"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/image",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "amphora"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-amphora.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-amphora\" }}",
            "name": "apiserver_loadbalancer_octavia-amphora"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "ovn"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-ovn.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-ovn\" }}",
            "name": "apiserver_loadbalancer_octavia-ovn"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network",
                    "valueFrom": {
                      "template": "id: {{ .kube_vip_network_id }}\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/disableAPIServerFloatingIP",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerFixedIP",
                    "valueFrom": {
                      "template": "{{ if .kube_vip_apiserver_public_ip }}{{.kube_vip_apiserver_public_ip}}{{else}}{{.kube_vip_apiserver_virtual_ip}}{{end}}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/ports",
                    "valueFrom": {
                      "template": "- network:\n    id: {{ .kube_vip_network_id }}\n  allowedAddressPairs:\n  - ipAddress: {{ .kube_vip_apiserver_virtual_ip }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/preKubeadmCommands",
                    "valueFrom": {
                      "template": "- modprobe --all ip_vs ip_vs_rr nf_conntrack\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files",
                    "valueFrom": {
                      "template": "- content: |\n    ip_vs\n    ip_vs_rr\n    nf_conntrack\n  owner: \"root:root\"\n  path: /etc/modules-load.d/kube-vip.conf\n  permissions: \"0644\"\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files/-",
                    "valueFrom": {
                      "template": "content: |\n  # docker run --network host --rm ghcr.io/kube-vip/kube-vip:v0.7.2 manifest pod --address '{{ .kube_vip_apiserver_virtual_ip }}' --controlplane --arp --leaderElection --enableLoadBalancer\n  apiVersion: v1\n  kind: Pod\n  metadata:\n    creationTimestamp: null\n    name: kube-vip\n    namespace: kube-system\n  spec:\n    containers:\n    - args:\n      - manager\n      env:\n      - name: vip_arp\n        value: \"true\"\n      - name: port\n        value: \"6443\"\n      - name: vip_cidr\n        value: \"32\"\n      - name: dns_mode\n        value: first\n      - name: cp_enable\n        value: \"true\"\n      - name: cp_namespace\n        value: kube-system\n      - name: vip_leaderelection\n        value: \"true\"\n      - name: vip_leasename\n        value: plndr-cp-lock\n      - name: vip_leaseduration\n        value: \"5\"\n      - name: vip_renewdeadline\n        value: \"3\"\n      - name: vip_retryperiod\n        value: \"1\"\n      - name: lb_enable\n        value: \"true\"\n      - name: lb_port\n        value: \"6443\"\n      - name: lb_fwdmethod\n        value: local\n      - name: address\n        value: '{{ .kube_vip_apiserver_virtual_ip }}'\n      - name: prometheus_server\n        value: :2112\n      image: ghcr.io/kube-vip/kube-vip:v0.7.2\n      imagePullPolicy: IfNotPresent # Always\n      name: kube-vip\n      resources: {}\n      securityContext:\n        capabilities:\n          add:\n          - NET_ADMIN\n          - NET_RAW\n      volumeMounts:\n      - mountPath: /etc/kubernetes/admin.conf\n        name: kubeconfig\n    hostAliases:\n    - hostnames:\n      - kubernetes\n      ip: 127.0.0.1\n    hostNetwork: true\n    volumes:\n    - hostPath:\n        path: /etc/kubernetes/admin.conf\n      name: kubeconfig\n  status: {}\nowner: \"root:root\"\npath: /etc/kubernetes/manifests/kube-vip.yaml\npermissions: \"0644\"\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to kube-vip.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"kube-vip\" }}",
            "name": "apiserver_loadbalancer_kube-vip"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetworkId",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { name: {{ . }}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "controller_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "worker_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dnsNameservers",
                    "valueFrom": {
                      "variable": "dns_nameservers"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of nameservers for the OpenStack Subnet being created.",
            "enabledIf": "{{ if and .dns_nameservers (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/nodeCidr",
                    "valueFrom": {
                      "variable": "node_cidr"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ if and .node_cidr (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "node_cidr"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_flavor_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing flavor used as a default yawol flavor.",
                "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_image_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing imaged used as a default yawol image.",
                "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_network_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_virtual_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Virtual IP address reserved in kube_vip_network_id.",
                "example": "10.0.0.197",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_public_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "apiserver_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "workload_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                "example": "none, octavia-amphora, octavia-ovn, yawol",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-scs-1-27-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground2"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground2"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-04T07:51:39Z",
            "message": "Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackClusterTemplate kaas-playground2/openstack-scs-1-27-v4-cluster\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackClusterTemplate kaas-playground2/openstack-scs-1-27-v4-cluster\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground2/openstack-scs-1-27-v4-control-plane\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground2/openstack-scs-1-27-v4-control-plane\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground2/openstack-scs-1-27-v4\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground2/openstack-scs-1-27-v4\"",
            "reason": "OutdatedRefVersions",
            "severity": "Warning",
            "status": "False",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-19T13:30:32Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                    "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "apiserver_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_public_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Virtual IP address reserved in kube_vip_network_id.",
                    "example": "10.0.0.197",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_virtual_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                    "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_network_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                    "example": "none, octavia-amphora, octavia-ovn, yawol",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "workload_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing flavor used as a default yawol flavor.",
                    "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_flavor_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing imaged used as a default yawol image.",
                    "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_image_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T16:03:35Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T16:03:35Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T16:03:35Z"
          }
        ],
        "name": "openstack-alpha-1-28-v4",
        "namespace": "kaas-playground3",
        "resourceVersion": "9721347",
        "uid": "abc9990b-400a-4445-be4c-e6254f6d249e"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-28-v4-control-plane",
              "namespace": "kaas-playground3"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-28-v4-control-plane",
            "namespace": "kaas-playground3"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-28-v4-cluster",
            "namespace": "kaas-playground3"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-28-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground3"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground3"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T16:03:35Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T16:03:35Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T17:17:38Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T17:17:38Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T17:17:39Z"
          }
        ],
        "name": "openstack-alpha-1-29-v3",
        "namespace": "kaas-playground3",
        "resourceVersion": "9793779",
        "uid": "4220c59e-f778-4dab-a74e-3ce9336f6cc3"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-29-v3-control-plane",
              "namespace": "kaas-playground3"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-29-v3-control-plane",
            "namespace": "kaas-playground3"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-29-v3-cluster",
            "namespace": "kaas-playground3"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-29-v3",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground3"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground3"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T17:17:39Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T17:17:38Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T17:18:09Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T17:18:09Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T17:18:09Z"
          }
        ],
        "name": "openstack-alpha-1-30-v2",
        "namespace": "kaas-playground3",
        "resourceVersion": "9794308",
        "uid": "543b3706-0575-457d-9327-a393df39d895"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-30-v2-control-plane",
              "namespace": "kaas-playground3"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-30-v2-control-plane",
            "namespace": "kaas-playground3"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-30-v2-cluster",
            "namespace": "kaas-playground3"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-30-v2",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground3"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground3"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T17:18:09Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T17:18:09Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-07-03T14:03:18Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-07-03T14:03:18Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-03T14:03:19Z"
          }
        ],
        "name": "openstack-kamaji-1-30-v0-sha.11930ee",
        "namespace": "kaas-playground3",
        "resourceVersion": "18905416",
        "uid": "84c46d22-7004-4e1c-a4b2-65e7ea04f5ae"
      },
      "spec": {
        "controlPlane": {
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
            "kind": "KamajiControlPlaneTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-control-plane",
            "namespace": "kaas-playground3"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-cluster",
            "namespace": "kaas-playground3"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dataStoreName",
                    "valueFrom": {
                      "variable": "data_store"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the name of the Kamaji DataStore to use for the given KamajiControlPlane.",
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/addons/coreDNS/dnsServiceIPs",
                    "valueFrom": {
                      "variable": "dns_service_ips"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the list of IP addresses for the cluster DNS server.",
            "enabledIf": "{{ if .dns_service_ips }}true{{end}}",
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-client-id={{ .oidc_config.client_id }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-issuer-url={{ .oidc_config.issuer_url }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-claim={{ .oidc_config.username_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-claim={{ .oidc_config.groups_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-prefix={{ .oidc_config.username_prefix }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-prefix={{ .oidc_config.groups_prefix }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "data_store",
            "required": true,
            "schema": {
              "openAPIV3Schema": {
                "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                "example": "default",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_service_ips",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "10.96.0.10"
                ],
                "description": "List of IP addresses for the cluster DNS server.",
                "example": [
                  "10.96.0.10"
                ],
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "default-worker",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground3"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground3"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-03T14:03:18Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-07-03T14:03:18Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": true,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                    "example": "default",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "10.96.0.10"
                    ],
                    "description": "List of IP addresses for the cluster DNS server.",
                    "example": [
                      "10.96.0.10"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-19T13:30:36Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-19T13:30:36Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-04T07:51:38Z"
          }
        ],
        "name": "openstack-scs-1-27-v4",
        "namespace": "kaas-playground3",
        "resourceVersion": "19981381",
        "uid": "15e6834e-6cbc-4d5e-840e-43565f3b588a"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-scs-1-27-v4-control-plane",
              "namespace": "kaas-playground3"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-scs-1-27-v4-control-plane",
            "namespace": "kaas-playground3"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-scs-1-27-v4-cluster",
            "namespace": "kaas-playground3"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/image",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "amphora"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-amphora.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-amphora\" }}",
            "name": "apiserver_loadbalancer_octavia-amphora"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "ovn"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-ovn.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-ovn\" }}",
            "name": "apiserver_loadbalancer_octavia-ovn"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network",
                    "valueFrom": {
                      "template": "id: {{ .kube_vip_network_id }}\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/disableAPIServerFloatingIP",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerFixedIP",
                    "valueFrom": {
                      "template": "{{ if .kube_vip_apiserver_public_ip }}{{.kube_vip_apiserver_public_ip}}{{else}}{{.kube_vip_apiserver_virtual_ip}}{{end}}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/ports",
                    "valueFrom": {
                      "template": "- network:\n    id: {{ .kube_vip_network_id }}\n  allowedAddressPairs:\n  - ipAddress: {{ .kube_vip_apiserver_virtual_ip }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/preKubeadmCommands",
                    "valueFrom": {
                      "template": "- modprobe --all ip_vs ip_vs_rr nf_conntrack\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files",
                    "valueFrom": {
                      "template": "- content: |\n    ip_vs\n    ip_vs_rr\n    nf_conntrack\n  owner: \"root:root\"\n  path: /etc/modules-load.d/kube-vip.conf\n  permissions: \"0644\"\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files/-",
                    "valueFrom": {
                      "template": "content: |\n  # docker run --network host --rm ghcr.io/kube-vip/kube-vip:v0.7.2 manifest pod --address '{{ .kube_vip_apiserver_virtual_ip }}' --controlplane --arp --leaderElection --enableLoadBalancer\n  apiVersion: v1\n  kind: Pod\n  metadata:\n    creationTimestamp: null\n    name: kube-vip\n    namespace: kube-system\n  spec:\n    containers:\n    - args:\n      - manager\n      env:\n      - name: vip_arp\n        value: \"true\"\n      - name: port\n        value: \"6443\"\n      - name: vip_cidr\n        value: \"32\"\n      - name: dns_mode\n        value: first\n      - name: cp_enable\n        value: \"true\"\n      - name: cp_namespace\n        value: kube-system\n      - name: vip_leaderelection\n        value: \"true\"\n      - name: vip_leasename\n        value: plndr-cp-lock\n      - name: vip_leaseduration\n        value: \"5\"\n      - name: vip_renewdeadline\n        value: \"3\"\n      - name: vip_retryperiod\n        value: \"1\"\n      - name: lb_enable\n        value: \"true\"\n      - name: lb_port\n        value: \"6443\"\n      - name: lb_fwdmethod\n        value: local\n      - name: address\n        value: '{{ .kube_vip_apiserver_virtual_ip }}'\n      - name: prometheus_server\n        value: :2112\n      image: ghcr.io/kube-vip/kube-vip:v0.7.2\n      imagePullPolicy: IfNotPresent # Always\n      name: kube-vip\n      resources: {}\n      securityContext:\n        capabilities:\n          add:\n          - NET_ADMIN\n          - NET_RAW\n      volumeMounts:\n      - mountPath: /etc/kubernetes/admin.conf\n        name: kubeconfig\n    hostAliases:\n    - hostnames:\n      - kubernetes\n      ip: 127.0.0.1\n    hostNetwork: true\n    volumes:\n    - hostPath:\n        path: /etc/kubernetes/admin.conf\n      name: kubeconfig\n  status: {}\nowner: \"root:root\"\npath: /etc/kubernetes/manifests/kube-vip.yaml\npermissions: \"0644\"\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to kube-vip.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"kube-vip\" }}",
            "name": "apiserver_loadbalancer_kube-vip"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetworkId",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { name: {{ . }}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "controller_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "worker_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dnsNameservers",
                    "valueFrom": {
                      "variable": "dns_nameservers"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of nameservers for the OpenStack Subnet being created.",
            "enabledIf": "{{ if and .dns_nameservers (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/nodeCidr",
                    "valueFrom": {
                      "variable": "node_cidr"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ if and .node_cidr (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "node_cidr"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_flavor_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing flavor used as a default yawol flavor.",
                "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_image_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing imaged used as a default yawol image.",
                "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_network_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_virtual_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Virtual IP address reserved in kube_vip_network_id.",
                "example": "10.0.0.197",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_public_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "apiserver_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "workload_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                "example": "none, octavia-amphora, octavia-ovn, yawol",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-scs-1-27-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground3"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground3"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-04T07:51:38Z",
            "message": "Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground3/openstack-scs-1-27-v4-control-plane\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground3/openstack-scs-1-27-v4-control-plane\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground3/openstack-scs-1-27-v4\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground3/openstack-scs-1-27-v4\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackClusterTemplate kaas-playground3/openstack-scs-1-27-v4-cluster\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackClusterTemplate kaas-playground3/openstack-scs-1-27-v4-cluster\"",
            "reason": "OutdatedRefVersions",
            "severity": "Warning",
            "status": "False",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-19T13:30:36Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                    "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "apiserver_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_public_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Virtual IP address reserved in kube_vip_network_id.",
                    "example": "10.0.0.197",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_virtual_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                    "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_network_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                    "example": "none, octavia-amphora, octavia-ovn, yawol",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "workload_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing flavor used as a default yawol flavor.",
                    "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_flavor_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing imaged used as a default yawol image.",
                    "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_image_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T17:17:08Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T17:17:08Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T17:17:08Z"
          }
        ],
        "name": "openstack-alpha-1-28-v4",
        "namespace": "kaas-playground4",
        "resourceVersion": "9793305",
        "uid": "82c3b4b7-b37b-42d9-a288-ceaca379a1bb"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-28-v4-control-plane",
              "namespace": "kaas-playground4"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-28-v4-control-plane",
            "namespace": "kaas-playground4"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-28-v4-cluster",
            "namespace": "kaas-playground4"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-28-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground4"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground4"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T17:17:08Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T17:17:08Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T16:14:41Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T16:14:41Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T16:14:41Z"
          }
        ],
        "name": "openstack-alpha-1-29-v3",
        "namespace": "kaas-playground4",
        "resourceVersion": "9732985",
        "uid": "34f8f51d-83bf-4847-b728-3667bc3d8eb6"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-29-v3-control-plane",
              "namespace": "kaas-playground4"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-29-v3-control-plane",
            "namespace": "kaas-playground4"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-29-v3-cluster",
            "namespace": "kaas-playground4"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-29-v3",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground4"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground4"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T16:14:41Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T16:14:41Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T15:53:02Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T15:53:02Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T15:53:02Z"
          }
        ],
        "name": "openstack-alpha-1-30-v2",
        "namespace": "kaas-playground4",
        "resourceVersion": "9710926",
        "uid": "fe6199bd-4f97-4b38-a986-b7e8e1e78265"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-30-v2-control-plane",
              "namespace": "kaas-playground4"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-30-v2-control-plane",
            "namespace": "kaas-playground4"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-30-v2-cluster",
            "namespace": "kaas-playground4"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-30-v2",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground4"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground4"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T15:53:02Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T15:53:02Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-07-03T14:03:19Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-07-03T14:03:19Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-03T14:03:19Z"
          }
        ],
        "name": "openstack-kamaji-1-30-v0-sha.11930ee",
        "namespace": "kaas-playground4",
        "resourceVersion": "18905446",
        "uid": "bc944b35-e27e-43f5-b4fa-b542a0aca611"
      },
      "spec": {
        "controlPlane": {
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
            "kind": "KamajiControlPlaneTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-control-plane",
            "namespace": "kaas-playground4"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-cluster",
            "namespace": "kaas-playground4"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dataStoreName",
                    "valueFrom": {
                      "variable": "data_store"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the name of the Kamaji DataStore to use for the given KamajiControlPlane.",
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/addons/coreDNS/dnsServiceIPs",
                    "valueFrom": {
                      "variable": "dns_service_ips"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the list of IP addresses for the cluster DNS server.",
            "enabledIf": "{{ if .dns_service_ips }}true{{end}}",
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-client-id={{ .oidc_config.client_id }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-issuer-url={{ .oidc_config.issuer_url }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-claim={{ .oidc_config.username_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-claim={{ .oidc_config.groups_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-prefix={{ .oidc_config.username_prefix }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-prefix={{ .oidc_config.groups_prefix }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "data_store",
            "required": true,
            "schema": {
              "openAPIV3Schema": {
                "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                "example": "default",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_service_ips",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "10.96.0.10"
                ],
                "description": "List of IP addresses for the cluster DNS server.",
                "example": [
                  "10.96.0.10"
                ],
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "default-worker",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground4"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground4"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-03T14:03:19Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-07-03T14:03:19Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": true,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                    "example": "default",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "10.96.0.10"
                    ],
                    "description": "List of IP addresses for the cluster DNS server.",
                    "example": [
                      "10.96.0.10"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-19T13:30:30Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-19T13:30:30Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-04T06:43:13Z"
          }
        ],
        "name": "openstack-scs-1-27-v4",
        "namespace": "kaas-playground4",
        "resourceVersion": "19911964",
        "uid": "0949dedc-bb3d-4d8d-b38f-e38b2771960d"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-scs-1-27-v4-control-plane",
              "namespace": "kaas-playground4"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-scs-1-27-v4-control-plane",
            "namespace": "kaas-playground4"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-scs-1-27-v4-cluster",
            "namespace": "kaas-playground4"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/image",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "amphora"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-amphora.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-amphora\" }}",
            "name": "apiserver_loadbalancer_octavia-amphora"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "ovn"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-ovn.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-ovn\" }}",
            "name": "apiserver_loadbalancer_octavia-ovn"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network",
                    "valueFrom": {
                      "template": "id: {{ .kube_vip_network_id }}\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/disableAPIServerFloatingIP",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerFixedIP",
                    "valueFrom": {
                      "template": "{{ if .kube_vip_apiserver_public_ip }}{{.kube_vip_apiserver_public_ip}}{{else}}{{.kube_vip_apiserver_virtual_ip}}{{end}}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/ports",
                    "valueFrom": {
                      "template": "- network:\n    id: {{ .kube_vip_network_id }}\n  allowedAddressPairs:\n  - ipAddress: {{ .kube_vip_apiserver_virtual_ip }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/preKubeadmCommands",
                    "valueFrom": {
                      "template": "- modprobe --all ip_vs ip_vs_rr nf_conntrack\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files",
                    "valueFrom": {
                      "template": "- content: |\n    ip_vs\n    ip_vs_rr\n    nf_conntrack\n  owner: \"root:root\"\n  path: /etc/modules-load.d/kube-vip.conf\n  permissions: \"0644\"\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files/-",
                    "valueFrom": {
                      "template": "content: |\n  # docker run --network host --rm ghcr.io/kube-vip/kube-vip:v0.7.2 manifest pod --address '{{ .kube_vip_apiserver_virtual_ip }}' --controlplane --arp --leaderElection --enableLoadBalancer\n  apiVersion: v1\n  kind: Pod\n  metadata:\n    creationTimestamp: null\n    name: kube-vip\n    namespace: kube-system\n  spec:\n    containers:\n    - args:\n      - manager\n      env:\n      - name: vip_arp\n        value: \"true\"\n      - name: port\n        value: \"6443\"\n      - name: vip_cidr\n        value: \"32\"\n      - name: dns_mode\n        value: first\n      - name: cp_enable\n        value: \"true\"\n      - name: cp_namespace\n        value: kube-system\n      - name: vip_leaderelection\n        value: \"true\"\n      - name: vip_leasename\n        value: plndr-cp-lock\n      - name: vip_leaseduration\n        value: \"5\"\n      - name: vip_renewdeadline\n        value: \"3\"\n      - name: vip_retryperiod\n        value: \"1\"\n      - name: lb_enable\n        value: \"true\"\n      - name: lb_port\n        value: \"6443\"\n      - name: lb_fwdmethod\n        value: local\n      - name: address\n        value: '{{ .kube_vip_apiserver_virtual_ip }}'\n      - name: prometheus_server\n        value: :2112\n      image: ghcr.io/kube-vip/kube-vip:v0.7.2\n      imagePullPolicy: IfNotPresent # Always\n      name: kube-vip\n      resources: {}\n      securityContext:\n        capabilities:\n          add:\n          - NET_ADMIN\n          - NET_RAW\n      volumeMounts:\n      - mountPath: /etc/kubernetes/admin.conf\n        name: kubeconfig\n    hostAliases:\n    - hostnames:\n      - kubernetes\n      ip: 127.0.0.1\n    hostNetwork: true\n    volumes:\n    - hostPath:\n        path: /etc/kubernetes/admin.conf\n      name: kubeconfig\n  status: {}\nowner: \"root:root\"\npath: /etc/kubernetes/manifests/kube-vip.yaml\npermissions: \"0644\"\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to kube-vip.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"kube-vip\" }}",
            "name": "apiserver_loadbalancer_kube-vip"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetworkId",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { name: {{ . }}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "controller_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "worker_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dnsNameservers",
                    "valueFrom": {
                      "variable": "dns_nameservers"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of nameservers for the OpenStack Subnet being created.",
            "enabledIf": "{{ if and .dns_nameservers (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/nodeCidr",
                    "valueFrom": {
                      "variable": "node_cidr"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ if and .node_cidr (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "node_cidr"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_flavor_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing flavor used as a default yawol flavor.",
                "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_image_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing imaged used as a default yawol image.",
                "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_network_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_virtual_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Virtual IP address reserved in kube_vip_network_id.",
                "example": "10.0.0.197",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_public_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "apiserver_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "workload_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                "example": "none, octavia-amphora, octavia-ovn, yawol",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-scs-1-27-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground4"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground4"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-04T06:43:13Z",
            "message": "Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackClusterTemplate kaas-playground4/openstack-scs-1-27-v4-cluster\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackClusterTemplate kaas-playground4/openstack-scs-1-27-v4-cluster\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground4/openstack-scs-1-27-v4-control-plane\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground4/openstack-scs-1-27-v4-control-plane\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground4/openstack-scs-1-27-v4\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground4/openstack-scs-1-27-v4\"",
            "reason": "OutdatedRefVersions",
            "severity": "Warning",
            "status": "False",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-19T13:30:30Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                    "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "apiserver_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_public_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Virtual IP address reserved in kube_vip_network_id.",
                    "example": "10.0.0.197",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_virtual_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                    "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_network_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                    "example": "none, octavia-amphora, octavia-ovn, yawol",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "workload_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing flavor used as a default yawol flavor.",
                    "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_flavor_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing imaged used as a default yawol image.",
                    "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_image_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T17:08:34Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T17:08:34Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T17:08:35Z"
          }
        ],
        "name": "openstack-alpha-1-28-v4",
        "namespace": "kaas-playground5",
        "resourceVersion": "9784963",
        "uid": "e23a7819-426c-4300-aff7-e8d98179f2c2"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-28-v4-control-plane",
              "namespace": "kaas-playground5"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-28-v4-control-plane",
            "namespace": "kaas-playground5"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-28-v4-cluster",
            "namespace": "kaas-playground5"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-28-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground5"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground5"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T17:08:35Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T17:08:34Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T17:18:10Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T17:18:10Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T17:18:11Z"
          }
        ],
        "name": "openstack-alpha-1-29-v3",
        "namespace": "kaas-playground5",
        "resourceVersion": "9794366",
        "uid": "f5a3bd5c-5ec3-4e68-bb54-30374eb190d0"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-29-v3-control-plane",
              "namespace": "kaas-playground5"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-29-v3-control-plane",
            "namespace": "kaas-playground5"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-29-v3-cluster",
            "namespace": "kaas-playground5"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-29-v3",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground5"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground5"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T17:18:11Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T17:18:10Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T16:11:46Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T16:11:46Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T16:11:46Z"
          }
        ],
        "name": "openstack-alpha-1-30-v2",
        "namespace": "kaas-playground5",
        "resourceVersion": "9730171",
        "uid": "395725f5-80b0-4150-83af-0bda2eb7f845"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-30-v2-control-plane",
              "namespace": "kaas-playground5"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-30-v2-control-plane",
            "namespace": "kaas-playground5"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-30-v2-cluster",
            "namespace": "kaas-playground5"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-30-v2",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground5"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground5"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T16:11:46Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T16:11:46Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-07-03T14:03:20Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-07-03T14:03:20Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-03T14:03:20Z"
          }
        ],
        "name": "openstack-kamaji-1-30-v0-sha.11930ee",
        "namespace": "kaas-playground5",
        "resourceVersion": "18905478",
        "uid": "368b916e-fa8a-437b-a92c-490f658b330b"
      },
      "spec": {
        "controlPlane": {
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
            "kind": "KamajiControlPlaneTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-control-plane",
            "namespace": "kaas-playground5"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-cluster",
            "namespace": "kaas-playground5"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dataStoreName",
                    "valueFrom": {
                      "variable": "data_store"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the name of the Kamaji DataStore to use for the given KamajiControlPlane.",
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/addons/coreDNS/dnsServiceIPs",
                    "valueFrom": {
                      "variable": "dns_service_ips"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the list of IP addresses for the cluster DNS server.",
            "enabledIf": "{{ if .dns_service_ips }}true{{end}}",
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-client-id={{ .oidc_config.client_id }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-issuer-url={{ .oidc_config.issuer_url }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-claim={{ .oidc_config.username_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-claim={{ .oidc_config.groups_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-prefix={{ .oidc_config.username_prefix }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-prefix={{ .oidc_config.groups_prefix }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "data_store",
            "required": true,
            "schema": {
              "openAPIV3Schema": {
                "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                "example": "default",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_service_ips",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "10.96.0.10"
                ],
                "description": "List of IP addresses for the cluster DNS server.",
                "example": [
                  "10.96.0.10"
                ],
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "default-worker",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground5"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground5"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-03T14:03:20Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-07-03T14:03:20Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": true,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                    "example": "default",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "10.96.0.10"
                    ],
                    "description": "List of IP addresses for the cluster DNS server.",
                    "example": [
                      "10.96.0.10"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-19T13:30:38Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-19T13:30:38Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-04T07:51:39Z"
          }
        ],
        "name": "openstack-scs-1-27-v4",
        "namespace": "kaas-playground5",
        "resourceVersion": "19981389",
        "uid": "00827854-49dd-4d44-9d05-e23a2d4ece75"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-scs-1-27-v4-control-plane",
              "namespace": "kaas-playground5"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-scs-1-27-v4-control-plane",
            "namespace": "kaas-playground5"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-scs-1-27-v4-cluster",
            "namespace": "kaas-playground5"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/image",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "amphora"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-amphora.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-amphora\" }}",
            "name": "apiserver_loadbalancer_octavia-amphora"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "ovn"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-ovn.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-ovn\" }}",
            "name": "apiserver_loadbalancer_octavia-ovn"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network",
                    "valueFrom": {
                      "template": "id: {{ .kube_vip_network_id }}\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/disableAPIServerFloatingIP",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerFixedIP",
                    "valueFrom": {
                      "template": "{{ if .kube_vip_apiserver_public_ip }}{{.kube_vip_apiserver_public_ip}}{{else}}{{.kube_vip_apiserver_virtual_ip}}{{end}}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/ports",
                    "valueFrom": {
                      "template": "- network:\n    id: {{ .kube_vip_network_id }}\n  allowedAddressPairs:\n  - ipAddress: {{ .kube_vip_apiserver_virtual_ip }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/preKubeadmCommands",
                    "valueFrom": {
                      "template": "- modprobe --all ip_vs ip_vs_rr nf_conntrack\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files",
                    "valueFrom": {
                      "template": "- content: |\n    ip_vs\n    ip_vs_rr\n    nf_conntrack\n  owner: \"root:root\"\n  path: /etc/modules-load.d/kube-vip.conf\n  permissions: \"0644\"\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files/-",
                    "valueFrom": {
                      "template": "content: |\n  # docker run --network host --rm ghcr.io/kube-vip/kube-vip:v0.7.2 manifest pod --address '{{ .kube_vip_apiserver_virtual_ip }}' --controlplane --arp --leaderElection --enableLoadBalancer\n  apiVersion: v1\n  kind: Pod\n  metadata:\n    creationTimestamp: null\n    name: kube-vip\n    namespace: kube-system\n  spec:\n    containers:\n    - args:\n      - manager\n      env:\n      - name: vip_arp\n        value: \"true\"\n      - name: port\n        value: \"6443\"\n      - name: vip_cidr\n        value: \"32\"\n      - name: dns_mode\n        value: first\n      - name: cp_enable\n        value: \"true\"\n      - name: cp_namespace\n        value: kube-system\n      - name: vip_leaderelection\n        value: \"true\"\n      - name: vip_leasename\n        value: plndr-cp-lock\n      - name: vip_leaseduration\n        value: \"5\"\n      - name: vip_renewdeadline\n        value: \"3\"\n      - name: vip_retryperiod\n        value: \"1\"\n      - name: lb_enable\n        value: \"true\"\n      - name: lb_port\n        value: \"6443\"\n      - name: lb_fwdmethod\n        value: local\n      - name: address\n        value: '{{ .kube_vip_apiserver_virtual_ip }}'\n      - name: prometheus_server\n        value: :2112\n      image: ghcr.io/kube-vip/kube-vip:v0.7.2\n      imagePullPolicy: IfNotPresent # Always\n      name: kube-vip\n      resources: {}\n      securityContext:\n        capabilities:\n          add:\n          - NET_ADMIN\n          - NET_RAW\n      volumeMounts:\n      - mountPath: /etc/kubernetes/admin.conf\n        name: kubeconfig\n    hostAliases:\n    - hostnames:\n      - kubernetes\n      ip: 127.0.0.1\n    hostNetwork: true\n    volumes:\n    - hostPath:\n        path: /etc/kubernetes/admin.conf\n      name: kubeconfig\n  status: {}\nowner: \"root:root\"\npath: /etc/kubernetes/manifests/kube-vip.yaml\npermissions: \"0644\"\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to kube-vip.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"kube-vip\" }}",
            "name": "apiserver_loadbalancer_kube-vip"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetworkId",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { name: {{ . }}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "controller_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "worker_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dnsNameservers",
                    "valueFrom": {
                      "variable": "dns_nameservers"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of nameservers for the OpenStack Subnet being created.",
            "enabledIf": "{{ if and .dns_nameservers (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/nodeCidr",
                    "valueFrom": {
                      "variable": "node_cidr"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ if and .node_cidr (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "node_cidr"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_flavor_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing flavor used as a default yawol flavor.",
                "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_image_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing imaged used as a default yawol image.",
                "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_network_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_virtual_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Virtual IP address reserved in kube_vip_network_id.",
                "example": "10.0.0.197",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_public_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "apiserver_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "workload_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                "example": "none, octavia-amphora, octavia-ovn, yawol",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-scs-1-27-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground5"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground5"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-04T07:51:39Z",
            "message": "Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground5/openstack-scs-1-27-v4\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground5/openstack-scs-1-27-v4\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackClusterTemplate kaas-playground5/openstack-scs-1-27-v4-cluster\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackClusterTemplate kaas-playground5/openstack-scs-1-27-v4-cluster\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground5/openstack-scs-1-27-v4-control-plane\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground5/openstack-scs-1-27-v4-control-plane\"",
            "reason": "OutdatedRefVersions",
            "severity": "Warning",
            "status": "False",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-19T13:30:38Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                    "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "apiserver_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_public_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Virtual IP address reserved in kube_vip_network_id.",
                    "example": "10.0.0.197",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_virtual_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                    "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_network_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                    "example": "none, octavia-amphora, octavia-ovn, yawol",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "workload_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing flavor used as a default yawol flavor.",
                    "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_flavor_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing imaged used as a default yawol image.",
                    "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_image_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T16:22:53Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T16:22:53Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T16:22:54Z"
          }
        ],
        "name": "openstack-alpha-1-28-v4",
        "namespace": "kaas-playground6",
        "resourceVersion": "9741205",
        "uid": "5ce61ed6-3a78-4b7b-a12d-eeff1ee5aca5"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-28-v4-control-plane",
              "namespace": "kaas-playground6"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-28-v4-control-plane",
            "namespace": "kaas-playground6"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-28-v4-cluster",
            "namespace": "kaas-playground6"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-28-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground6"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground6"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T16:22:54Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T16:22:53Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T16:13:54Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T16:13:54Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T16:13:55Z"
          }
        ],
        "name": "openstack-alpha-1-29-v3",
        "namespace": "kaas-playground6",
        "resourceVersion": "9732089",
        "uid": "1807f524-d852-4b9a-b761-95581de9b1f4"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-29-v3-control-plane",
              "namespace": "kaas-playground6"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-29-v3-control-plane",
            "namespace": "kaas-playground6"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-29-v3-cluster",
            "namespace": "kaas-playground6"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-29-v3",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground6"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground6"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T16:13:55Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T16:13:54Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T16:23:52Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T16:23:52Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T16:23:52Z"
          }
        ],
        "name": "openstack-alpha-1-30-v2",
        "namespace": "kaas-playground6",
        "resourceVersion": "9742155",
        "uid": "9b1c1a14-81c8-44c9-b62b-7076a58abae0"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-30-v2-control-plane",
              "namespace": "kaas-playground6"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-30-v2-control-plane",
            "namespace": "kaas-playground6"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-30-v2-cluster",
            "namespace": "kaas-playground6"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-30-v2",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground6"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground6"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T16:23:52Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T16:23:52Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-07-03T14:03:20Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-07-03T14:03:20Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-03T14:03:21Z"
          }
        ],
        "name": "openstack-kamaji-1-30-v0-sha.11930ee",
        "namespace": "kaas-playground6",
        "resourceVersion": "18905523",
        "uid": "b2f6a34d-c7ae-4509-b104-7cfacc50f83c"
      },
      "spec": {
        "controlPlane": {
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
            "kind": "KamajiControlPlaneTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-control-plane",
            "namespace": "kaas-playground6"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-cluster",
            "namespace": "kaas-playground6"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dataStoreName",
                    "valueFrom": {
                      "variable": "data_store"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the name of the Kamaji DataStore to use for the given KamajiControlPlane.",
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/addons/coreDNS/dnsServiceIPs",
                    "valueFrom": {
                      "variable": "dns_service_ips"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the list of IP addresses for the cluster DNS server.",
            "enabledIf": "{{ if .dns_service_ips }}true{{end}}",
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-client-id={{ .oidc_config.client_id }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-issuer-url={{ .oidc_config.issuer_url }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-claim={{ .oidc_config.username_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-claim={{ .oidc_config.groups_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-prefix={{ .oidc_config.username_prefix }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-prefix={{ .oidc_config.groups_prefix }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "data_store",
            "required": true,
            "schema": {
              "openAPIV3Schema": {
                "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                "example": "default",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_service_ips",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "10.96.0.10"
                ],
                "description": "List of IP addresses for the cluster DNS server.",
                "example": [
                  "10.96.0.10"
                ],
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "default-worker",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground6"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground6"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-03T14:03:21Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-07-03T14:03:20Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": true,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                    "example": "default",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "10.96.0.10"
                    ],
                    "description": "List of IP addresses for the cluster DNS server.",
                    "example": [
                      "10.96.0.10"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-19T13:30:41Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-19T13:30:41Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-04T07:41:52Z"
          }
        ],
        "name": "openstack-scs-1-27-v4",
        "namespace": "kaas-playground6",
        "resourceVersion": "19971356",
        "uid": "3fb4f548-4a88-4e2d-bf25-a32ba474b54c"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-scs-1-27-v4-control-plane",
              "namespace": "kaas-playground6"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-scs-1-27-v4-control-plane",
            "namespace": "kaas-playground6"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-scs-1-27-v4-cluster",
            "namespace": "kaas-playground6"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/image",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "amphora"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-amphora.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-amphora\" }}",
            "name": "apiserver_loadbalancer_octavia-amphora"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "ovn"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-ovn.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-ovn\" }}",
            "name": "apiserver_loadbalancer_octavia-ovn"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network",
                    "valueFrom": {
                      "template": "id: {{ .kube_vip_network_id }}\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/disableAPIServerFloatingIP",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerFixedIP",
                    "valueFrom": {
                      "template": "{{ if .kube_vip_apiserver_public_ip }}{{.kube_vip_apiserver_public_ip}}{{else}}{{.kube_vip_apiserver_virtual_ip}}{{end}}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/ports",
                    "valueFrom": {
                      "template": "- network:\n    id: {{ .kube_vip_network_id }}\n  allowedAddressPairs:\n  - ipAddress: {{ .kube_vip_apiserver_virtual_ip }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/preKubeadmCommands",
                    "valueFrom": {
                      "template": "- modprobe --all ip_vs ip_vs_rr nf_conntrack\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files",
                    "valueFrom": {
                      "template": "- content: |\n    ip_vs\n    ip_vs_rr\n    nf_conntrack\n  owner: \"root:root\"\n  path: /etc/modules-load.d/kube-vip.conf\n  permissions: \"0644\"\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files/-",
                    "valueFrom": {
                      "template": "content: |\n  # docker run --network host --rm ghcr.io/kube-vip/kube-vip:v0.7.2 manifest pod --address '{{ .kube_vip_apiserver_virtual_ip }}' --controlplane --arp --leaderElection --enableLoadBalancer\n  apiVersion: v1\n  kind: Pod\n  metadata:\n    creationTimestamp: null\n    name: kube-vip\n    namespace: kube-system\n  spec:\n    containers:\n    - args:\n      - manager\n      env:\n      - name: vip_arp\n        value: \"true\"\n      - name: port\n        value: \"6443\"\n      - name: vip_cidr\n        value: \"32\"\n      - name: dns_mode\n        value: first\n      - name: cp_enable\n        value: \"true\"\n      - name: cp_namespace\n        value: kube-system\n      - name: vip_leaderelection\n        value: \"true\"\n      - name: vip_leasename\n        value: plndr-cp-lock\n      - name: vip_leaseduration\n        value: \"5\"\n      - name: vip_renewdeadline\n        value: \"3\"\n      - name: vip_retryperiod\n        value: \"1\"\n      - name: lb_enable\n        value: \"true\"\n      - name: lb_port\n        value: \"6443\"\n      - name: lb_fwdmethod\n        value: local\n      - name: address\n        value: '{{ .kube_vip_apiserver_virtual_ip }}'\n      - name: prometheus_server\n        value: :2112\n      image: ghcr.io/kube-vip/kube-vip:v0.7.2\n      imagePullPolicy: IfNotPresent # Always\n      name: kube-vip\n      resources: {}\n      securityContext:\n        capabilities:\n          add:\n          - NET_ADMIN\n          - NET_RAW\n      volumeMounts:\n      - mountPath: /etc/kubernetes/admin.conf\n        name: kubeconfig\n    hostAliases:\n    - hostnames:\n      - kubernetes\n      ip: 127.0.0.1\n    hostNetwork: true\n    volumes:\n    - hostPath:\n        path: /etc/kubernetes/admin.conf\n      name: kubeconfig\n  status: {}\nowner: \"root:root\"\npath: /etc/kubernetes/manifests/kube-vip.yaml\npermissions: \"0644\"\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to kube-vip.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"kube-vip\" }}",
            "name": "apiserver_loadbalancer_kube-vip"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetworkId",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { name: {{ . }}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "controller_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "worker_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dnsNameservers",
                    "valueFrom": {
                      "variable": "dns_nameservers"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of nameservers for the OpenStack Subnet being created.",
            "enabledIf": "{{ if and .dns_nameservers (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/nodeCidr",
                    "valueFrom": {
                      "variable": "node_cidr"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ if and .node_cidr (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "node_cidr"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_flavor_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing flavor used as a default yawol flavor.",
                "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_image_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing imaged used as a default yawol image.",
                "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_network_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_virtual_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Virtual IP address reserved in kube_vip_network_id.",
                "example": "10.0.0.197",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_public_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "apiserver_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "workload_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                "example": "none, octavia-amphora, octavia-ovn, yawol",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-scs-1-27-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground6"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground6"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-04T07:41:52Z",
            "message": "Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackClusterTemplate kaas-playground6/openstack-scs-1-27-v4-cluster\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackClusterTemplate kaas-playground6/openstack-scs-1-27-v4-cluster\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground6/openstack-scs-1-27-v4-control-plane\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground6/openstack-scs-1-27-v4-control-plane\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground6/openstack-scs-1-27-v4\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground6/openstack-scs-1-27-v4\"",
            "reason": "OutdatedRefVersions",
            "severity": "Warning",
            "status": "False",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-19T13:30:42Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                    "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "apiserver_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_public_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Virtual IP address reserved in kube_vip_network_id.",
                    "example": "10.0.0.197",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_virtual_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                    "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_network_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                    "example": "none, octavia-amphora, octavia-ovn, yawol",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "workload_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing flavor used as a default yawol flavor.",
                    "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_flavor_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing imaged used as a default yawol image.",
                    "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_image_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T16:23:14Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T16:23:14Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T16:23:14Z"
          }
        ],
        "name": "openstack-alpha-1-28-v4",
        "namespace": "kaas-playground7",
        "resourceVersion": "9741556",
        "uid": "25d5caef-3e64-457f-9c90-c6fc53a83b46"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-28-v4-control-plane",
              "namespace": "kaas-playground7"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-28-v4-control-plane",
            "namespace": "kaas-playground7"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-28-v4-cluster",
            "namespace": "kaas-playground7"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-28-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground7"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground7"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T16:23:14Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T16:23:14Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T17:18:10Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T17:18:10Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T17:18:10Z"
          }
        ],
        "name": "openstack-alpha-1-29-v3",
        "namespace": "kaas-playground7",
        "resourceVersion": "9794340",
        "uid": "f321e58a-37c2-4533-90f9-3cadf628ed7c"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-29-v3-control-plane",
              "namespace": "kaas-playground7"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-29-v3-control-plane",
            "namespace": "kaas-playground7"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-29-v3-cluster",
            "namespace": "kaas-playground7"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-29-v3",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground7"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground7"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T17:18:10Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T17:18:10Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T17:18:12Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T17:18:12Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T17:18:12Z"
          }
        ],
        "name": "openstack-alpha-1-30-v2",
        "namespace": "kaas-playground7",
        "resourceVersion": "9794431",
        "uid": "e8b4b6b4-9815-413d-acf3-e1994bed37e8"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-30-v2-control-plane",
              "namespace": "kaas-playground7"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-30-v2-control-plane",
            "namespace": "kaas-playground7"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-30-v2-cluster",
            "namespace": "kaas-playground7"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-30-v2",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground7"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground7"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T17:18:12Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T17:18:12Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-07-03T14:03:21Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-07-03T14:03:21Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-03T14:03:22Z"
          }
        ],
        "name": "openstack-kamaji-1-30-v0-sha.11930ee",
        "namespace": "kaas-playground7",
        "resourceVersion": "18905565",
        "uid": "8b2401c7-f34f-4af3-b038-249c74e967aa"
      },
      "spec": {
        "controlPlane": {
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
            "kind": "KamajiControlPlaneTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-control-plane",
            "namespace": "kaas-playground7"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-cluster",
            "namespace": "kaas-playground7"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dataStoreName",
                    "valueFrom": {
                      "variable": "data_store"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the name of the Kamaji DataStore to use for the given KamajiControlPlane.",
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/addons/coreDNS/dnsServiceIPs",
                    "valueFrom": {
                      "variable": "dns_service_ips"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the list of IP addresses for the cluster DNS server.",
            "enabledIf": "{{ if .dns_service_ips }}true{{end}}",
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-client-id={{ .oidc_config.client_id }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-issuer-url={{ .oidc_config.issuer_url }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-claim={{ .oidc_config.username_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-claim={{ .oidc_config.groups_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-prefix={{ .oidc_config.username_prefix }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-prefix={{ .oidc_config.groups_prefix }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "data_store",
            "required": true,
            "schema": {
              "openAPIV3Schema": {
                "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                "example": "default",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_service_ips",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "10.96.0.10"
                ],
                "description": "List of IP addresses for the cluster DNS server.",
                "example": [
                  "10.96.0.10"
                ],
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "default-worker",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground7"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground7"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-03T14:03:22Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-07-03T14:03:21Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": true,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                    "example": "default",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "10.96.0.10"
                    ],
                    "description": "List of IP addresses for the cluster DNS server.",
                    "example": [
                      "10.96.0.10"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-19T13:30:39Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-19T13:30:39Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-04T07:12:32Z"
          }
        ],
        "name": "openstack-scs-1-27-v4",
        "namespace": "kaas-playground7",
        "resourceVersion": "19941493",
        "uid": "4fc93fcc-9843-4536-be03-180289fd4ee8"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-scs-1-27-v4-control-plane",
              "namespace": "kaas-playground7"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-scs-1-27-v4-control-plane",
            "namespace": "kaas-playground7"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-scs-1-27-v4-cluster",
            "namespace": "kaas-playground7"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/image",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "amphora"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-amphora.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-amphora\" }}",
            "name": "apiserver_loadbalancer_octavia-amphora"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "ovn"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-ovn.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-ovn\" }}",
            "name": "apiserver_loadbalancer_octavia-ovn"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network",
                    "valueFrom": {
                      "template": "id: {{ .kube_vip_network_id }}\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/disableAPIServerFloatingIP",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerFixedIP",
                    "valueFrom": {
                      "template": "{{ if .kube_vip_apiserver_public_ip }}{{.kube_vip_apiserver_public_ip}}{{else}}{{.kube_vip_apiserver_virtual_ip}}{{end}}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/ports",
                    "valueFrom": {
                      "template": "- network:\n    id: {{ .kube_vip_network_id }}\n  allowedAddressPairs:\n  - ipAddress: {{ .kube_vip_apiserver_virtual_ip }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/preKubeadmCommands",
                    "valueFrom": {
                      "template": "- modprobe --all ip_vs ip_vs_rr nf_conntrack\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files",
                    "valueFrom": {
                      "template": "- content: |\n    ip_vs\n    ip_vs_rr\n    nf_conntrack\n  owner: \"root:root\"\n  path: /etc/modules-load.d/kube-vip.conf\n  permissions: \"0644\"\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files/-",
                    "valueFrom": {
                      "template": "content: |\n  # docker run --network host --rm ghcr.io/kube-vip/kube-vip:v0.7.2 manifest pod --address '{{ .kube_vip_apiserver_virtual_ip }}' --controlplane --arp --leaderElection --enableLoadBalancer\n  apiVersion: v1\n  kind: Pod\n  metadata:\n    creationTimestamp: null\n    name: kube-vip\n    namespace: kube-system\n  spec:\n    containers:\n    - args:\n      - manager\n      env:\n      - name: vip_arp\n        value: \"true\"\n      - name: port\n        value: \"6443\"\n      - name: vip_cidr\n        value: \"32\"\n      - name: dns_mode\n        value: first\n      - name: cp_enable\n        value: \"true\"\n      - name: cp_namespace\n        value: kube-system\n      - name: vip_leaderelection\n        value: \"true\"\n      - name: vip_leasename\n        value: plndr-cp-lock\n      - name: vip_leaseduration\n        value: \"5\"\n      - name: vip_renewdeadline\n        value: \"3\"\n      - name: vip_retryperiod\n        value: \"1\"\n      - name: lb_enable\n        value: \"true\"\n      - name: lb_port\n        value: \"6443\"\n      - name: lb_fwdmethod\n        value: local\n      - name: address\n        value: '{{ .kube_vip_apiserver_virtual_ip }}'\n      - name: prometheus_server\n        value: :2112\n      image: ghcr.io/kube-vip/kube-vip:v0.7.2\n      imagePullPolicy: IfNotPresent # Always\n      name: kube-vip\n      resources: {}\n      securityContext:\n        capabilities:\n          add:\n          - NET_ADMIN\n          - NET_RAW\n      volumeMounts:\n      - mountPath: /etc/kubernetes/admin.conf\n        name: kubeconfig\n    hostAliases:\n    - hostnames:\n      - kubernetes\n      ip: 127.0.0.1\n    hostNetwork: true\n    volumes:\n    - hostPath:\n        path: /etc/kubernetes/admin.conf\n      name: kubeconfig\n  status: {}\nowner: \"root:root\"\npath: /etc/kubernetes/manifests/kube-vip.yaml\npermissions: \"0644\"\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to kube-vip.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"kube-vip\" }}",
            "name": "apiserver_loadbalancer_kube-vip"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetworkId",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { name: {{ . }}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "controller_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "worker_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dnsNameservers",
                    "valueFrom": {
                      "variable": "dns_nameservers"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of nameservers for the OpenStack Subnet being created.",
            "enabledIf": "{{ if and .dns_nameservers (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/nodeCidr",
                    "valueFrom": {
                      "variable": "node_cidr"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ if and .node_cidr (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "node_cidr"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_flavor_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing flavor used as a default yawol flavor.",
                "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_image_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing imaged used as a default yawol image.",
                "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_network_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_virtual_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Virtual IP address reserved in kube_vip_network_id.",
                "example": "10.0.0.197",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_public_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "apiserver_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "workload_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                "example": "none, octavia-amphora, octavia-ovn, yawol",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-scs-1-27-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground7"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground7"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-04T07:12:32Z",
            "message": "Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackClusterTemplate kaas-playground7/openstack-scs-1-27-v4-cluster\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackClusterTemplate kaas-playground7/openstack-scs-1-27-v4-cluster\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground7/openstack-scs-1-27-v4-control-plane\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground7/openstack-scs-1-27-v4-control-plane\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground7/openstack-scs-1-27-v4\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground7/openstack-scs-1-27-v4\"",
            "reason": "OutdatedRefVersions",
            "severity": "Warning",
            "status": "False",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-19T13:30:39Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                    "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "apiserver_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_public_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Virtual IP address reserved in kube_vip_network_id.",
                    "example": "10.0.0.197",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_virtual_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                    "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_network_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                    "example": "none, octavia-amphora, octavia-ovn, yawol",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "workload_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing flavor used as a default yawol flavor.",
                    "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_flavor_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing imaged used as a default yawol image.",
                    "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_image_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T17:18:08Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T17:18:08Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T17:18:09Z"
          }
        ],
        "name": "openstack-alpha-1-28-v4",
        "namespace": "kaas-playground8",
        "resourceVersion": "9794281",
        "uid": "7dc830b4-8201-423e-bab4-2849d756ea01"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-28-v4-control-plane",
              "namespace": "kaas-playground8"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-28-v4-control-plane",
            "namespace": "kaas-playground8"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-28-v4-cluster",
            "namespace": "kaas-playground8"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-28-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground8"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground8"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T17:18:09Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T17:18:08Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T15:52:06Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T15:52:06Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T15:52:06Z"
          }
        ],
        "name": "openstack-alpha-1-29-v3",
        "namespace": "kaas-playground8",
        "resourceVersion": "9710053",
        "uid": "1b8696b0-3241-48ae-9779-29fa09a12735"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-29-v3-control-plane",
              "namespace": "kaas-playground8"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-29-v3-control-plane",
            "namespace": "kaas-playground8"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-29-v3-cluster",
            "namespace": "kaas-playground8"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-29-v3",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground8"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground8"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T15:52:06Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T15:52:06Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T15:24:06Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T15:24:06Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T15:24:06Z"
          }
        ],
        "name": "openstack-alpha-1-30-v2",
        "namespace": "kaas-playground8",
        "resourceVersion": "9681993",
        "uid": "64bc1e56-b84a-4f57-b1be-0c3b2f55f120"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-30-v2-control-plane",
              "namespace": "kaas-playground8"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-30-v2-control-plane",
            "namespace": "kaas-playground8"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-30-v2-cluster",
            "namespace": "kaas-playground8"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-30-v2",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground8"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground8"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T15:24:06Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T15:24:06Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-07-03T14:03:22Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-07-03T14:03:22Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-03T14:03:22Z"
          }
        ],
        "name": "openstack-kamaji-1-30-v0-sha.11930ee",
        "namespace": "kaas-playground8",
        "resourceVersion": "18905598",
        "uid": "bb588dfd-dbae-4c00-a219-e5d0b7ec1f35"
      },
      "spec": {
        "controlPlane": {
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
            "kind": "KamajiControlPlaneTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-control-plane",
            "namespace": "kaas-playground8"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-cluster",
            "namespace": "kaas-playground8"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dataStoreName",
                    "valueFrom": {
                      "variable": "data_store"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the name of the Kamaji DataStore to use for the given KamajiControlPlane.",
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/addons/coreDNS/dnsServiceIPs",
                    "valueFrom": {
                      "variable": "dns_service_ips"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the list of IP addresses for the cluster DNS server.",
            "enabledIf": "{{ if .dns_service_ips }}true{{end}}",
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-client-id={{ .oidc_config.client_id }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-issuer-url={{ .oidc_config.issuer_url }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-claim={{ .oidc_config.username_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-claim={{ .oidc_config.groups_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-prefix={{ .oidc_config.username_prefix }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-prefix={{ .oidc_config.groups_prefix }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "data_store",
            "required": true,
            "schema": {
              "openAPIV3Schema": {
                "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                "example": "default",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_service_ips",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "10.96.0.10"
                ],
                "description": "List of IP addresses for the cluster DNS server.",
                "example": [
                  "10.96.0.10"
                ],
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "default-worker",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground8"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground8"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-03T14:03:22Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-07-03T14:03:22Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": true,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                    "example": "default",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "10.96.0.10"
                    ],
                    "description": "List of IP addresses for the cluster DNS server.",
                    "example": [
                      "10.96.0.10"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-19T13:30:40Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-19T13:30:40Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-04T06:04:06Z"
          }
        ],
        "name": "openstack-scs-1-27-v4",
        "namespace": "kaas-playground8",
        "resourceVersion": "19872296",
        "uid": "a745caee-8995-4088-893c-3cf80bd5325f"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-scs-1-27-v4-control-plane",
              "namespace": "kaas-playground8"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-scs-1-27-v4-control-plane",
            "namespace": "kaas-playground8"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-scs-1-27-v4-cluster",
            "namespace": "kaas-playground8"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/image",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "amphora"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-amphora.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-amphora\" }}",
            "name": "apiserver_loadbalancer_octavia-amphora"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "ovn"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-ovn.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-ovn\" }}",
            "name": "apiserver_loadbalancer_octavia-ovn"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network",
                    "valueFrom": {
                      "template": "id: {{ .kube_vip_network_id }}\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/disableAPIServerFloatingIP",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerFixedIP",
                    "valueFrom": {
                      "template": "{{ if .kube_vip_apiserver_public_ip }}{{.kube_vip_apiserver_public_ip}}{{else}}{{.kube_vip_apiserver_virtual_ip}}{{end}}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/ports",
                    "valueFrom": {
                      "template": "- network:\n    id: {{ .kube_vip_network_id }}\n  allowedAddressPairs:\n  - ipAddress: {{ .kube_vip_apiserver_virtual_ip }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/preKubeadmCommands",
                    "valueFrom": {
                      "template": "- modprobe --all ip_vs ip_vs_rr nf_conntrack\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files",
                    "valueFrom": {
                      "template": "- content: |\n    ip_vs\n    ip_vs_rr\n    nf_conntrack\n  owner: \"root:root\"\n  path: /etc/modules-load.d/kube-vip.conf\n  permissions: \"0644\"\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files/-",
                    "valueFrom": {
                      "template": "content: |\n  # docker run --network host --rm ghcr.io/kube-vip/kube-vip:v0.7.2 manifest pod --address '{{ .kube_vip_apiserver_virtual_ip }}' --controlplane --arp --leaderElection --enableLoadBalancer\n  apiVersion: v1\n  kind: Pod\n  metadata:\n    creationTimestamp: null\n    name: kube-vip\n    namespace: kube-system\n  spec:\n    containers:\n    - args:\n      - manager\n      env:\n      - name: vip_arp\n        value: \"true\"\n      - name: port\n        value: \"6443\"\n      - name: vip_cidr\n        value: \"32\"\n      - name: dns_mode\n        value: first\n      - name: cp_enable\n        value: \"true\"\n      - name: cp_namespace\n        value: kube-system\n      - name: vip_leaderelection\n        value: \"true\"\n      - name: vip_leasename\n        value: plndr-cp-lock\n      - name: vip_leaseduration\n        value: \"5\"\n      - name: vip_renewdeadline\n        value: \"3\"\n      - name: vip_retryperiod\n        value: \"1\"\n      - name: lb_enable\n        value: \"true\"\n      - name: lb_port\n        value: \"6443\"\n      - name: lb_fwdmethod\n        value: local\n      - name: address\n        value: '{{ .kube_vip_apiserver_virtual_ip }}'\n      - name: prometheus_server\n        value: :2112\n      image: ghcr.io/kube-vip/kube-vip:v0.7.2\n      imagePullPolicy: IfNotPresent # Always\n      name: kube-vip\n      resources: {}\n      securityContext:\n        capabilities:\n          add:\n          - NET_ADMIN\n          - NET_RAW\n      volumeMounts:\n      - mountPath: /etc/kubernetes/admin.conf\n        name: kubeconfig\n    hostAliases:\n    - hostnames:\n      - kubernetes\n      ip: 127.0.0.1\n    hostNetwork: true\n    volumes:\n    - hostPath:\n        path: /etc/kubernetes/admin.conf\n      name: kubeconfig\n  status: {}\nowner: \"root:root\"\npath: /etc/kubernetes/manifests/kube-vip.yaml\npermissions: \"0644\"\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to kube-vip.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"kube-vip\" }}",
            "name": "apiserver_loadbalancer_kube-vip"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetworkId",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { name: {{ . }}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "controller_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "worker_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dnsNameservers",
                    "valueFrom": {
                      "variable": "dns_nameservers"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of nameservers for the OpenStack Subnet being created.",
            "enabledIf": "{{ if and .dns_nameservers (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/nodeCidr",
                    "valueFrom": {
                      "variable": "node_cidr"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ if and .node_cidr (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "node_cidr"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_flavor_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing flavor used as a default yawol flavor.",
                "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_image_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing imaged used as a default yawol image.",
                "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_network_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_virtual_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Virtual IP address reserved in kube_vip_network_id.",
                "example": "10.0.0.197",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_public_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "apiserver_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "workload_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                "example": "none, octavia-amphora, octavia-ovn, yawol",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-scs-1-27-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground8"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground8"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-04T06:04:06Z",
            "message": "Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackClusterTemplate kaas-playground8/openstack-scs-1-27-v4-cluster\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackClusterTemplate kaas-playground8/openstack-scs-1-27-v4-cluster\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground8/openstack-scs-1-27-v4-control-plane\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground8/openstack-scs-1-27-v4-control-plane\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground8/openstack-scs-1-27-v4\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground8/openstack-scs-1-27-v4\"",
            "reason": "OutdatedRefVersions",
            "severity": "Warning",
            "status": "False",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-19T13:30:40Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                    "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "apiserver_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_public_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Virtual IP address reserved in kube_vip_network_id.",
                    "example": "10.0.0.197",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_virtual_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                    "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_network_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                    "example": "none, octavia-amphora, octavia-ovn, yawol",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "workload_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing flavor used as a default yawol flavor.",
                    "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_flavor_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing imaged used as a default yawol image.",
                    "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_image_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T16:03:10Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T16:03:10Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T16:03:10Z"
          }
        ],
        "name": "openstack-alpha-1-28-v4",
        "namespace": "kaas-playground9",
        "resourceVersion": "9720978",
        "uid": "4b10a2c4-5a5d-4a03-a513-05c8f55230a7"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-28-v4-control-plane",
              "namespace": "kaas-playground9"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-28-v4-control-plane",
            "namespace": "kaas-playground9"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-28-v4-cluster",
            "namespace": "kaas-playground9"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-28-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-28-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground9"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-28-v4",
                    "namespace": "kaas-playground9"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T16:03:10Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T16:03:10Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-20T09:46:24Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-20T09:46:24Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-20T09:46:25Z"
          }
        ],
        "name": "openstack-alpha-1-29-v3",
        "namespace": "kaas-playground9",
        "resourceVersion": "2103818",
        "uid": "05f1edc0-05de-4576-b86a-b9928c448dc0"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-29-v3-control-plane",
              "namespace": "kaas-playground9"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-29-v3-control-plane",
            "namespace": "kaas-playground9"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-29-v3-cluster",
            "namespace": "kaas-playground9"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-29-v3"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-client-id",
                    "valueFrom": {
                      "variable": "oidc_config.client_id"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-issuer-url",
                    "valueFrom": {
                      "variable": "oidc_config.issuer_url"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-claim",
                    "valueFrom": {
                      "variable": "oidc_config.username_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-claim",
                    "valueFrom": {
                      "variable": "oidc_config.groups_claim"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-username-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.username_prefix"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/extraArgs/oidc-groups-prefix",
                    "valueFrom": {
                      "variable": "oidc_config.groups_prefix"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-29-v3",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground9"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-29-v3",
                    "namespace": "kaas-playground9"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-20T09:46:25Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-20T09:46:24Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-26T16:23:15Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-26T16:23:15Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-06-26T16:23:15Z"
          }
        ],
        "name": "openstack-alpha-1-30-v2",
        "namespace": "kaas-playground9",
        "resourceVersion": "9741587",
        "uid": "8cf3d586-9a8d-41ef-899f-af75243b094e"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-alpha-1-30-v2-control-plane",
              "namespace": "kaas-playground9"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-alpha-1-30-v2-control-plane",
            "namespace": "kaas-playground9"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-alpha-1-30-v2-cluster",
            "namespace": "kaas-playground9"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n                  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Enables custom load balancer for OpenStack API server",
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "valueFrom": {
                      "variable": "openstack_loadbalancer_apiserver_provider"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the name of the load balancer provider.",
            "enabledIf": "{{ ne .openstack_loadbalancer_apiserver_provider \"\" }}",
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .controller_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-alpha-1-30-v2"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": true,
                "description": "Enables custom load balancer for OpenStack API server",
                "type": "boolean"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_loadbalancer_apiserver_provider",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "amphora",
                "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                "example": "ovn",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-alpha-1-30-v2",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground9"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-alpha-1-30-v2",
                    "namespace": "kaas-playground9"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-06-26T16:23:15Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-26T16:23:15Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": true,
                    "description": "Enables custom load balancer for OpenStack API server",
                    "type": "boolean"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "amphora",
                    "description": "The name of the load balancer provider (amphora or ovn) to use (defaults to amphora)",
                    "example": "ovn",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_loadbalancer_apiserver_provider"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-07-03T14:03:23Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-07-03T14:03:23Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-03T14:03:23Z"
          }
        ],
        "name": "openstack-kamaji-1-30-v0-sha.11930ee",
        "namespace": "kaas-playground9",
        "resourceVersion": "18905634",
        "uid": "d58ac509-3249-4c2e-9adb-7899d77625af"
      },
      "spec": {
        "controlPlane": {
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
            "kind": "KamajiControlPlaneTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-control-plane",
            "namespace": "kaas-playground9"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-kamaji-1-30-v0-sha.11930ee-cluster",
            "namespace": "kaas-playground9"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/image/filter/name",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "sizeGiB: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dataStoreName",
                    "valueFrom": {
                      "variable": "data_store"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the name of the Kamaji DataStore to use for the given KamajiControlPlane.",
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/addons/coreDNS/dnsServiceIPs",
                    "valueFrom": {
                      "variable": "dns_service_ips"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the list of IP addresses for the cluster DNS server.",
            "enabledIf": "{{ if .dns_service_ips }}true{{end}}",
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetwork/id",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSubnets",
                    "valueFrom": {
                      "template": "- cidr: '{{ .node_cidr }}'\n  dnsNameservers:\n  {{- range .dns_nameservers }}\n  - {{ . }}\n  {{- end }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR and optional nameservers for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ ne .node_cidr \"\" }}",
            "name": "subnet"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { filter: { name: {{ . }}}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/managedSecurityGroups/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroup",
                    "valueFrom": {
                      "template": "id: {{ .worker_server_group_id }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "default-worker"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-client-id={{ .oidc_config.client_id }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-issuer-url={{ .oidc_config.issuer_url }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-claim={{ .oidc_config.username_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-claim={{ .oidc_config.groups_claim }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-username-prefix={{ .oidc_config.username_prefix }}"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServer/extraArgs/-",
                    "valueFrom": {
                      "template": "--oidc-groups-prefix={{ .oidc_config.groups_prefix }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1alpha1",
                  "kind": "KamajiControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Configure API Server to use external authentication service.",
            "enabledIf": "{{ if and .oidc_config .oidc_config.client_id .oidc_config.issuer_url }}true{{end}}",
            "name": "oidc_config"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "data_store",
            "required": true,
            "schema": {
              "openAPIV3Schema": {
                "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                "example": "default",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_service_ips",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "10.96.0.10"
                ],
                "description": "List of IP addresses for the cluster DNS server.",
                "example": [
                  "10.96.0.10"
                ],
                "items": {
                  "type": "string"
                },
                "minItems": 1,
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "oidc_config",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "properties": {
                  "client_id": {
                    "description": "A client id that all tokens must be issued for.",
                    "example": "kubectl",
                    "type": "string"
                  },
                  "groups_claim": {
                    "default": "groups",
                    "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                    "example": "groups",
                    "type": "string"
                  },
                  "groups_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                    "example": "oidc:",
                    "type": "string"
                  },
                  "issuer_url": {
                    "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                    "example": "https://dex.k8s.scs.community",
                    "type": "string"
                  },
                  "username_claim": {
                    "default": "sub",
                    "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                    "example": "preferred_username",
                    "type": "string"
                  },
                  "username_prefix": {
                    "default": "oidc:",
                    "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                    "example": "oidc:",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "default-worker",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground9"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1beta1",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-kamaji-1-30-v0-sha.11930ee-default-worker",
                    "namespace": "kaas-playground9"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-03T14:03:23Z",
            "status": "True",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-07-03T14:03:23Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": true,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Name of the Kamaji DataStore to use for the given KamajiControlPlane.",
                    "example": "default",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "data_store"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "10.96.0.10"
                    ],
                    "description": "List of IP addresses for the cluster DNS server.",
                    "example": [
                      "10.96.0.10"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_service_ips"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "properties": {
                      "client_id": {
                        "description": "A client id that all tokens must be issued for.",
                        "example": "kubectl",
                        "type": "string"
                      },
                      "groups_claim": {
                        "default": "groups",
                        "description": "JWT claim to use as the user's group. If the claim is present it must be an array of strings.",
                        "example": "groups",
                        "type": "string"
                      },
                      "groups_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to group claims to prevent clashes with existing names (such as system: groups). For example, the value oidc: will create group names like oidc:engineering and oidc:infra.",
                        "example": "oidc:",
                        "type": "string"
                      },
                      "issuer_url": {
                        "description": "URL of the provider that allows the API server to discover public signing keys. Only URLs that use the https:// scheme are accepted. This is typically the provider's discovery URL, changed to have an empty path",
                        "example": "https://dex.k8s.scs.community",
                        "type": "string"
                      },
                      "username_claim": {
                        "default": "sub",
                        "description": "JWT claim to use as the user name. By default sub, which is expected to be a unique identifier of the end user. Admins can choose other claims, such as email or name, depending on their provider. However, claims other than email will be prefixed with the issuer URL to prevent naming clashes with other plugins.",
                        "example": "preferred_username",
                        "type": "string"
                      },
                      "username_prefix": {
                        "default": "oidc:",
                        "description": "Prefix prepended to username claims to prevent clashes with existing names (such as system: users). For example, the value oidc: will create usernames like oidc:jane.doe. If this flag isn't provided and --oidc-username-claim is a value other than email the prefix defaults to ( Issuer URL )# where ( Issuer URL ) is the value of --oidc-issuer-url. The value - can be used to disable all prefixing.",
                        "example": "oidc:",
                        "type": "string"
                      }
                    },
                    "type": "object"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "oidc_config"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          }
        ]
      }
    },
    {
      "apiVersion": "cluster.x-k8s.io/v1beta1",
      "kind": "ClusterClass",
      "metadata": {
        "creationTimestamp": "2024-06-19T13:30:43Z",
        "generation": 1,
        "labels": {
          "clusterstack.x-k8s.io/instance": "owned"
        },
        "managedFields": [
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:metadata": {
                "f:labels": {
                  "f:clusterstack.x-k8s.io/instance": {}
                }
              },
              "f:spec": {
                "f:controlPlane": {
                  "f:machineInfrastructure": {
                    "f:ref": {}
                  },
                  "f:ref": {}
                },
                "f:infrastructure": {
                  "f:ref": {}
                },
                "f:patches": {},
                "f:variables": {},
                "f:workers": {
                  "f:machineDeployments": {}
                }
              }
            },
            "manager": "kubectl",
            "operation": "Apply",
            "time": "2024-06-19T13:30:43Z"
          },
          {
            "apiVersion": "cluster.x-k8s.io/v1beta1",
            "fieldsType": "FieldsV1",
            "fieldsV1": {
              "f:status": {
                ".": {},
                "f:conditions": {},
                "f:observedGeneration": {},
                "f:variables": {}
              }
            },
            "manager": "manager",
            "operation": "Update",
            "subresource": "status",
            "time": "2024-07-04T07:51:39Z"
          }
        ],
        "name": "openstack-scs-1-27-v4",
        "namespace": "kaas-playground9",
        "resourceVersion": "19981391",
        "uid": "47d0c231-c13e-4fec-9c5d-fe08f8b7f6f9"
      },
      "spec": {
        "controlPlane": {
          "machineInfrastructure": {
            "ref": {
              "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
              "kind": "OpenStackMachineTemplate",
              "name": "openstack-scs-1-27-v4-control-plane",
              "namespace": "kaas-playground9"
            }
          },
          "metadata": {},
          "ref": {
            "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
            "kind": "KubeadmControlPlaneTemplate",
            "name": "openstack-scs-1-27-v4-control-plane",
            "namespace": "kaas-playground9"
          }
        },
        "infrastructure": {
          "ref": {
            "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
            "kind": "OpenStackClusterTemplate",
            "name": "openstack-scs-1-27-v4-cluster",
            "namespace": "kaas-playground9"
          }
        },
        "patches": [
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/image",
                    "valueFrom": {
                      "template": "ubuntu-capi-image-{{ .builtin.cluster.topology.version }}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack node image for workers and the controlplane to the cluster-api image with the version mentioned in spec.topology.version.",
            "name": "k8s_version"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "amphora"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-amphora.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-amphora\" }}",
            "name": "apiserver_loadbalancer_octavia-amphora"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/enabled",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerLoadBalancer/provider",
                    "value": "ovn"
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to octavia-ovn.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"octavia-ovn\" }}",
            "name": "apiserver_loadbalancer_octavia-ovn"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/network",
                    "valueFrom": {
                      "template": "id: {{ .kube_vip_network_id }}\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/disableAPIServerFloatingIP",
                    "value": true
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/apiServerFixedIP",
                    "valueFrom": {
                      "template": "{{ if .kube_vip_apiserver_public_ip }}{{.kube_vip_apiserver_public_ip}}{{else}}{{.kube_vip_apiserver_virtual_ip}}{{end}}"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/ports",
                    "valueFrom": {
                      "template": "- network:\n    id: {{ .kube_vip_network_id }}\n  allowedAddressPairs:\n  - ipAddress: {{ .kube_vip_apiserver_virtual_ip }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/preKubeadmCommands",
                    "valueFrom": {
                      "template": "- modprobe --all ip_vs ip_vs_rr nf_conntrack\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files",
                    "valueFrom": {
                      "template": "- content: |\n    ip_vs\n    ip_vs_rr\n    nf_conntrack\n  owner: \"root:root\"\n  path: /etc/modules-load.d/kube-vip.conf\n  permissions: \"0644\"\n"
                    }
                  },
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/files/-",
                    "valueFrom": {
                      "template": "content: |\n  # docker run --network host --rm ghcr.io/kube-vip/kube-vip:v0.7.2 manifest pod --address '{{ .kube_vip_apiserver_virtual_ip }}' --controlplane --arp --leaderElection --enableLoadBalancer\n  apiVersion: v1\n  kind: Pod\n  metadata:\n    creationTimestamp: null\n    name: kube-vip\n    namespace: kube-system\n  spec:\n    containers:\n    - args:\n      - manager\n      env:\n      - name: vip_arp\n        value: \"true\"\n      - name: port\n        value: \"6443\"\n      - name: vip_cidr\n        value: \"32\"\n      - name: dns_mode\n        value: first\n      - name: cp_enable\n        value: \"true\"\n      - name: cp_namespace\n        value: kube-system\n      - name: vip_leaderelection\n        value: \"true\"\n      - name: vip_leasename\n        value: plndr-cp-lock\n      - name: vip_leaseduration\n        value: \"5\"\n      - name: vip_renewdeadline\n        value: \"3\"\n      - name: vip_retryperiod\n        value: \"1\"\n      - name: lb_enable\n        value: \"true\"\n      - name: lb_port\n        value: \"6443\"\n      - name: lb_fwdmethod\n        value: local\n      - name: address\n        value: '{{ .kube_vip_apiserver_virtual_ip }}'\n      - name: prometheus_server\n        value: :2112\n      image: ghcr.io/kube-vip/kube-vip:v0.7.2\n      imagePullPolicy: IfNotPresent # Always\n      name: kube-vip\n      resources: {}\n      securityContext:\n        capabilities:\n          add:\n          - NET_ADMIN\n          - NET_RAW\n      volumeMounts:\n      - mountPath: /etc/kubernetes/admin.conf\n        name: kubeconfig\n    hostAliases:\n    - hostnames:\n      - kubernetes\n      ip: 127.0.0.1\n    hostNetwork: true\n    volumes:\n    - hostPath:\n        path: /etc/kubernetes/admin.conf\n      name: kubeconfig\n  status: {}\nowner: \"root:root\"\npath: /etc/kubernetes/manifests/kube-vip.yaml\npermissions: \"0644\"\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Takes care of the patches that should be applied when variable apiserver_loadbalancer is set to kube-vip.",
            "enabledIf": "{{ eq .apiserver_loadbalancer \"kube-vip\" }}",
            "name": "apiserver_loadbalancer_kube-vip"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "controller_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the KubeadmControlPlane.",
            "enabledIf": "{{ ne .controller_flavor \"\" }}",
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/flavor",
                    "valueFrom": {
                      "variable": "worker_flavor"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the openstack instance flavor for the worker nodes.",
            "enabledIf": "{{ ne .worker_flavor \"\" }}",
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .controller_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for control-plane nodes.",
            "enabledIf": "{{ if .controller_root_disk }}true{{end}}",
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/rootVolume",
                    "valueFrom": {
                      "template": "diskSize: {{ .worker_root_disk }}\n"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the root disk size in GiB for worker nodes.",
            "enabledIf": "{{ if .worker_root_disk }}true{{end}}",
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/externalNetworkId",
                    "valueFrom": {
                      "variable": "external_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
            "enabledIf": "{{ ne .external_id \"\" }}",
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/securityGroups",
                    "valueFrom": {
                      "template": "[ {{ range .openstack_security_groups }} { name: {{ . }}}, {{ end }} ]"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/allowAllInClusterTraffic",
                    "value": false
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of the openstack security groups for the worker and the controlplane instances.",
            "enabledIf": "{{ if .openstack_security_groups }}true{{end}}",
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/cloudName",
                    "valueFrom": {
                      "variable": "cloud_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the cloud to use from the clouds secret.",
            "enabledIf": "{{ ne .cloud_name \"\" }}",
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              },
              {
                "jsonPatches": [
                  {
                    "op": "replace",
                    "path": "/spec/template/spec/identityRef/name",
                    "valueFrom": {
                      "variable": "secret_name"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the name of the clouds secret.",
            "enabledIf": "{{ ne .secret_name \"\" }}",
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "controller_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the control plane nodes to.",
            "enabledIf": "{{ ne .controller_server_group_id \"\" }}",
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/serverGroupID",
                    "valueFrom": {
                      "variable": "worker_server_group_id"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the server group to assign the worker nodes to.",
            "enabledIf": "{{ ne .worker_server_group_id \"\" }}",
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/sshKeyName",
                    "valueFrom": {
                      "variable": "ssh_key"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackMachineTemplate",
                  "matchResources": {
                    "controlPlane": true,
                    "machineDeploymentClass": {
                      "names": [
                        "openstack-scs-1-27-v4"
                      ]
                    }
                  }
                }
              }
            ],
            "description": "Sets the ssh key to inject in the nodes.",
            "enabledIf": "{{ ne .ssh_key \"\" }}",
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/kubeadmConfigSpec/clusterConfiguration/apiServer/certSANs",
                    "valueFrom": {
                      "variable": "certSANs"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "controlplane.cluster.x-k8s.io/v1beta1",
                  "kind": "KubeadmControlPlaneTemplate",
                  "matchResources": {
                    "controlPlane": true
                  }
                }
              }
            ],
            "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
            "enabledIf": "{{ if .certSANs }}true{{end}}",
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/dnsNameservers",
                    "valueFrom": {
                      "variable": "dns_nameservers"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the list of nameservers for the OpenStack Subnet being created.",
            "enabledIf": "{{ if and .dns_nameservers (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "jsonPatches": [
                  {
                    "op": "add",
                    "path": "/spec/template/spec/nodeCidr",
                    "valueFrom": {
                      "variable": "node_cidr"
                    }
                  }
                ],
                "selector": {
                  "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                  "kind": "OpenStackClusterTemplate",
                  "matchResources": {
                    "infrastructureCluster": true
                  }
                }
              }
            ],
            "description": "Sets the NodeCIDR for the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet.",
            "enabledIf": "{{ if and .node_cidr (ne .apiserver_loadbalancer \"kube-vip\")}}true{{end}}",
            "name": "node_cidr"
          }
        ],
        "variables": [
          {
            "metadata": {},
            "name": "external_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for control-plane nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_flavor",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "SCS-2V-4-20",
                "description": "OpenStack instance flavor for worker nodes.",
                "example": "SCS-2V-4-20",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_root_disk",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                "example": 20,
                "minimum": 1,
                "type": "integer"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_flavor_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing flavor used as a default yawol flavor.",
                "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "yawol_image_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing imaged used as a default yawol image.",
                "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_network_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                "format": "uuid4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_virtual_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Virtual IP address reserved in kube_vip_network_id.",
                "example": "10.0.0.197",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "kube_vip_apiserver_public_ip",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                "format": "ipv4",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "openstack_security_groups",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "The names of the security groups to assign to the instance",
                "example": [
                  "security-group-1"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "cloud_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the cloud to use from the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "secret_name",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "openstack",
                "description": "The name of the clouds secret",
                "example": "openstack",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "controller_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the control plane nodes to.",
                "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "worker_server_group_id",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The server group to assign the worker nodes to.",
                "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "ssh_key",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "",
                "description": "The ssh key to inject in the nodes.",
                "example": "capi-keypair",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "apiserver_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "workload_loadbalancer",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "octavia-amphora",
                "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                "example": "none, octavia-amphora, octavia-ovn, yawol",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "dns_nameservers",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                "example": [
                  "5.1.66.255",
                  "185.150.99.255"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          },
          {
            "metadata": {},
            "name": "node_cidr",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": "10.8.0.0/20",
                "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                "example": "10.8.0.0/20",
                "format": "cidr",
                "type": "string"
              }
            }
          },
          {
            "metadata": {},
            "name": "certSANs",
            "required": false,
            "schema": {
              "openAPIV3Schema": {
                "default": [],
                "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                "example": [
                  "mydomain.example"
                ],
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            }
          }
        ],
        "workers": {
          "machineDeployments": [
            {
              "class": "openstack-scs-1-27-v4",
              "template": {
                "bootstrap": {
                  "ref": {
                    "apiVersion": "bootstrap.cluster.x-k8s.io/v1beta1",
                    "kind": "KubeadmConfigTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground9"
                  }
                },
                "infrastructure": {
                  "ref": {
                    "apiVersion": "infrastructure.cluster.x-k8s.io/v1alpha7",
                    "kind": "OpenStackMachineTemplate",
                    "name": "openstack-scs-1-27-v4",
                    "namespace": "kaas-playground9"
                  }
                },
                "metadata": {}
              }
            }
          ]
        }
      },
      "status": {
        "conditions": [
          {
            "lastTransitionTime": "2024-07-04T07:51:39Z",
            "message": "Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground9/openstack-scs-1-27-v4\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground9/openstack-scs-1-27-v4\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackClusterTemplate kaas-playground9/openstack-scs-1-27-v4-cluster\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackClusterTemplate kaas-playground9/openstack-scs-1-27-v4-cluster\", Ref \"infrastructure.cluster.x-k8s.io/v1alpha7, Kind=OpenStackMachineTemplate kaas-playground9/openstack-scs-1-27-v4-control-plane\" should be \"infrastructure.cluster.x-k8s.io/v1beta1, Kind=OpenStackMachineTemplate kaas-playground9/openstack-scs-1-27-v4-control-plane\"",
            "reason": "OutdatedRefVersions",
            "severity": "Warning",
            "status": "False",
            "type": "RefVersionsUpToDate"
          },
          {
            "lastTransitionTime": "2024-06-19T13:30:43Z",
            "status": "True",
            "type": "VariablesReconciled"
          }
        ],
        "observedGeneration": 1,
        "variables": [
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"In this cluster-stack we have two kind of loadbalancers. Each of them has its own configuration variable. This setting here is to configure the loadbalancer that is placed in front of the apiserver.\nTo configure the loadbalancer for the workloads, see variable workload_loadbalancer.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nkube-vip:\n  Uses kube-vip as loadbalancer.\n  You have to provide the following additional variables: \n    kube_vip_network_id\n    kube_vip_apiserver_virtual_ip\n    kube_vip_apiserver_public_ip \n \n  Requires Kubernetes version \u003c 1.29\n  Also the settings node_cidr and dns_nameservers will no longer have an effect.\n",
                    "example": "none, octavia-amphora, octavia-ovn, kube-vip",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "apiserver_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "CertSANs sets extra Subject Alternative Names for the API Server signing cert.",
                    "example": [
                      "mydomain.example"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "certSANs"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the cloud to use from the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "cloud_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for control-plane nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for control-plane nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the control plane nodes to.",
                    "example": "3adf4e92-bb33-4e44-8ad3-afda9dfe8ec3",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "controller_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "description": "\"DNSNameservers is the list of nameservers for the OpenStack Subnet being created. Set this value when you need to create a new network/subnet while the access through DNS is required.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the dns server when creating the subnet for kube-vip.\"\n",
                    "example": [
                      "5.1.66.255",
                      "185.150.99.255"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "dns_nameservers"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "description": "ExternalNetworkID is the ID of an external OpenStack Network. This is necessary to get public internet to the VMs.",
                    "example": "ebfe5546-f09f-4f42-ab54-094e457d42ec",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "external_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Public IP address associated with kube_vip_apiserver_virtual_ip. It is needed only when the management cluster is on a different network as a workload cluster.",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_public_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Virtual IP address reserved in kube_vip_network_id.",
                    "example": "10.0.0.197",
                    "format": "ipv4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_apiserver_virtual_ip"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing network. The network should have one subnet with one port reserved as virtual IP.",
                    "example": "40a51f6c-9e4b-4b24-9187-49851a410c97",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "kube_vip_network_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "10.8.0.0/20",
                    "description": "\"NodeCIDR is the OpenStack Subnet to be created. Cluster actuator will create a network, a subnet with NodeCIDR, and a router connected to this subnet. If you leave this empty, no network will be created.\nThis setting has no effect when apiserver_loadbalancer is set to kube-vip.\nHowever you can set the node_cidr when creating the subnet for kube-vip.\"\n",
                    "example": "10.8.0.0/20",
                    "format": "cidr",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "node_cidr"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": [],
                    "description": "The names of the security groups to assign to the instance",
                    "example": [
                      "security-group-1"
                    ],
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "openstack_security_groups"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "openstack",
                    "description": "The name of the clouds secret",
                    "example": "openstack",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "secret_name"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The ssh key to inject in the nodes.",
                    "example": "capi-keypair",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "ssh_key"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "SCS-2V-4-20",
                    "description": "OpenStack instance flavor for worker nodes.",
                    "example": "SCS-2V-4-20",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_flavor"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "Root disk size in GiB for worker nodes. OpenStack volume will be created and used instead of an ephemeral disk defined in flavor. Should be used also for the diskless flavors.",
                    "example": 20,
                    "minimum": 1,
                    "type": "integer"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_root_disk"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "",
                    "description": "The server group to assign the worker nodes to.",
                    "example": "869fe071-1e56-46a9-9166-47c9f228e297",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "worker_server_group_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "default": "octavia-amphora",
                    "description": "\"This setting here is to configure the loadbalancer solution for your services inside your cluster.\nIf you want to configure the loadbalancer in front of your apiserver, see variable apiserver_loadbalancer instead.\nYou can choose from 4 options:\n\nnone:\n  No loadbalancer solution will be deployed\n\noctavia-amphora:\n  (default) Uses openstack's loadbalancer service (provider:amphora)\n\noctavia-ovn:\n  Uses openstack's loadbalancer service (provider:ovn)\n\nyawol:\n  Uses yawol as loadbalancer.\n  You have to provide the following additional variables: \n    yawol_flavor_id\n    yawol_image_id\n  \n  Also note this setting does not work with application credentials (only username/password)\"\n",
                    "example": "none, octavia-amphora, octavia-ovn, yawol",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "workload_loadbalancer"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing flavor used as a default yawol flavor.",
                    "example": "0a79590e-10d7-4c2c-8f69-ca0a2c6208d2",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_flavor_id"
          },
          {
            "definitions": [
              {
                "from": "inline",
                "metadata": {},
                "required": false,
                "schema": {
                  "openAPIV3Schema": {
                    "description": "ID of the existing imaged used as a default yawol image.",
                    "example": "f0b2ef46-f0ff-43d2-9c08-f58a5a6e9060",
                    "format": "uuid4",
                    "type": "string"
                  }
                }
              }
            ],
            "definitionsConflict": false,
            "name": "yawol_image_id"
          }
        ]
      }
    }
  ],
  "kind": "ClusterClassList",
  "metadata": {
    "continue": "",
    "resourceVersion": "19982249"
  }
}